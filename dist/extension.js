/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e,t,n,r={286:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function i(){"use strict";i=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),s=new F(r||[]);return a(i,"_invoke",{value:M(e,n,s)}),i}function g(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var m="suspendedStart",h="suspendedYield",f="executing",v="completed",b={};function w(){}function x(){}function k(){}var y={};d(y,c,(function(){return this}));var C=Object.getPrototypeOf,S=C&&C(C(T([])));S&&S!==n&&o.call(S,c)&&(y=S);var I=k.prototype=w.prototype=Object.create(y);function P(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,s,c){var u=g(e[i],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==r(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,c)}))}c(u.arg)}var i;a(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function M(t,n,r){var o=m;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=O(s,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var u=g(t,n,r);if("normal"===u.type){if(o=r.done?v:h,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function O(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=g(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(r(t)+" is not iterable")}return x.prototype=k,a(I,"constructor",{value:k,configurable:!0}),a(k,"constructor",{value:x,configurable:!0}),x.displayName=d(k,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,d(e,l,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},P(E.prototype),d(E.prototype,u,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new E(p(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(I),d(I,l,"Generator"),d(I,c,(function(){return this})),d(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function a(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,s,"next",e)}function s(e){c(i,r,o,a,s,"throw",e)}a(void 0)}))}}var l,d,p,g=n(1398),m=(n(9329),n(5317).exec,n(6928)),h=n(9896),f=n(2535),v=n(9829),b=n(1449),w=n(4518),x=w.executeGitCommand,k=(w.getStatusText,w.ComittoError),y=w.ErrorTypes,C=w.logError,S=w.getErrorLogs,I=(w.withRetry,w.getDiagnosticInfo),P=n(857),E=(n(1398).WebviewPanel,new Set),M=!1,O=null,D=null,A=null,F=null,T=[];function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n={timestamp:(new Date).toISOString(),message:e,type:t};T.unshift(n),T.length>100&&(T=T.slice(0,100)),("error"===t?console.error:"warning"===t?console.warn:console.log)("[Comitto Debug] ".concat(e))}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"allgemein",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";if(g.workspace.getConfiguration("comitto").get("debug")){var r=(new Date).toISOString(),o="[".concat(r,"] [").concat(t,"] [").concat(n,"] ").concat(e);console.log(o),l||(l=g.window.createOutputChannel("Comitto Debug")),l.appendLine(o),"error"===n&&l.show(!0);try{var i=m.join(process.env.HOME||process.env.USERPROFILE,".comitto","logs");h.existsSync(i)||h.mkdirSync(i,{recursive:!0});var a=m.join(i,"debug_".concat((new Date).toISOString().split("T")[0],".log"));h.appendFileSync(a,o+"\n")}catch(e){console.error("Fehler beim Schreiben des Debug-Protokolls:",e)}}}function j(e){return z.apply(this,arguments)}function z(){return z=u(i().mark((function e(t){var n,r,o,a,s,c,u,l,d=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:"",r=!(d.length>2&&void 0!==d[2])||d[2],o=t instanceof k?t:new k(t.message||"Unbekannter Fehler",y.UNKNOWN,t,{context:n}),C(o),L("Fehler: ".concat(o.message).concat(n?" - "+n:""),"fehler","error"),console.error("Detaillierter Fehler:",o.toJSON()),!r){e.next=14;break}return a="Details anzeigen",s="Problem melden",c=n?"".concat(n,": "):"",e.next=12,g.window.showErrorMessage("".concat(c).concat(o.message),a,s);case 12:(u=e.sent)===a?G(o):u===s&&(l=encodeURIComponent("## Fehlerbeschreibung\n".concat(o.message,"\n\n")+"## Kontext\n".concat(n||"Nicht angegeben","\n\n")+"## Fehlerdetails\n```json\n".concat(JSON.stringify(o.toJSON(),null,2),"\n```\n\n")+"## Diagnostische Informationen\n```json\n".concat(JSON.stringify(I(),null,2),"\n```\n\n")+"## Schritte zur Reproduktion\n\n## Erwartetes Verhalten\n\n"+"## VSCode-Version\n".concat(g.version,"\n\n")+"## Comitto-Version\n".concat(g.extensions.getExtension("publisher.comitto").packageJSON.version||"Unbekannt")),g.env.openExternal(g.Uri.parse("https://github.com/publisher/comitto/issues/new?body=".concat(l,"&title=Fehler: ").concat(encodeURIComponent(o.message)))));case 14:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function G(e){var t=g.window.createWebviewPanel("comittoErrorDetails","Comitto Fehlerdetails",g.ViewColumn.One,{enableScripts:!0}),n=I();t.webview.html='\n        <!DOCTYPE html>\n        <html lang="de">\n        <head>\n            <meta charset="UTF-8">\n            <meta name="viewport" content="width=device-width, initial-scale=1.0">\n            <title>Comitto Fehlerdetails</title>\n            <style>\n                body {\n                    font-family: var(--vscode-font-family);\n                    padding: 20px;\n                    color: var(--vscode-foreground);\n                }\n                h2 {\n                    margin-top: 20px;\n                    margin-bottom: 10px;\n                    border-bottom: 1px solid var(--vscode-editor-lineHighlightBorder);\n                    padding-bottom: 5px;\n                }\n                pre {\n                    background-color: var(--vscode-editor-background);\n                    padding: 15px;\n                    border-radius: 4px;\n                    overflow: auto;\n                }\n                .error-section {\n                    margin-bottom: 20px;\n                }\n                .label {\n                    font-weight: bold;\n                    margin-right: 10px;\n                }\n                .actions {\n                    margin-top: 20px;\n                }\n                button {\n                    background-color: var(--vscode-button-background);\n                    color: var(--vscode-button-foreground);\n                    border: none;\n                    padding: 8px 16px;\n                    border-radius: 4px;\n                    cursor: pointer;\n                    margin-right: 10px;\n                }\n                button:hover {\n                    background-color: var(--vscode-button-hoverBackground);\n                }\n            </style>\n        </head>\n        <body>\n            <h1>Fehlerdetails</h1>\n            \n            <div class="error-section">\n                <h2>Fehlerinformationen</h2>\n                <div><span class="label">Typ:</span> '.concat(e.type,'</div>\n                <div><span class="label">Nachricht:</span> ').concat(e.message,'</div>\n                <div><span class="label">Zeitstempel:</span> ').concat(e.timestamp.toISOString(),'</div>\n            </div>\n            \n            <div class="error-section">\n                <h2>Fehlerkontext</h2>\n                <pre>').concat(JSON.stringify(e.context,null,2),"</pre>\n            </div>\n            \n            ").concat(e.originalError?'\n                <div class="error-section">\n                    <h2>Ursprünglicher Fehler</h2>\n                    <div><span class="label">Typ:</span> '.concat(e.originalError.name,'</div>\n                    <div><span class="label">Nachricht:</span> ').concat(e.originalError.message,"</div>\n                </div>\n            "):"",'\n            \n            <div class="error-section">\n                <h2>Stack-Trace</h2>\n                <pre>').concat(e.stack,'</pre>\n            </div>\n            \n            <div class="error-section">\n                <h2>Diagnostische Informationen</h2>\n                <pre>').concat(JSON.stringify(n,null,2),'</pre>\n            </div>\n            \n            <div class="actions">\n                <button id="copyDetails">Details kopieren</button>\n                <button id="reportIssue">Problem melden</button>\n            </div>\n            \n            <script>\n                const vscode = acquireVsCodeApi();\n                \n                document.getElementById(\'copyDetails\').addEventListener(\'click\', () => {\n                    const errorDetails = ').concat(JSON.stringify(JSON.stringify({error:e.toJSON(),diagnosticInfo:n},null,2)),";\n                    vscode.postMessage({\n                        command: 'copyToClipboard',\n                        text: errorDetails\n                    });\n                });\n                \n                document.getElementById('reportIssue').addEventListener('click', () => {\n                    vscode.postMessage({\n                        command: 'reportIssue',\n                        error: ").concat(JSON.stringify(e.toJSON()),"\n                    });\n                });\n            <\/script>\n        </body>\n        </html>\n    "),t.webview.onDidReceiveMessage((function(t){switch(t.command){case"copyToClipboard":g.env.clipboard.writeText(t.text),g.window.showInformationMessage("Fehlerdetails wurden in die Zwischenablage kopiert");break;case"reportIssue":var r=encodeURIComponent("## Fehlerbeschreibung\n".concat(e.message,"\n\n")+"## Fehlerdetails\n```json\n".concat(JSON.stringify(e.toJSON(),null,2),"\n```\n\n")+"## Diagnostische Informationen\n```json\n".concat(JSON.stringify(n,null,2),"\n```\n\n")+"## Schritte zur Reproduktion\n\n## Erwartetes Verhalten\n\n"+"## VSCode-Version\n".concat(g.version,"\n\n")+"## Comitto-Version\n".concat(g.extensions.getExtension("publisher.comitto").packageJSON.version||"Unbekannt"));g.env.openExternal(g.Uri.parse("https://github.com/publisher/comitto/issues/new?body=".concat(r,"&title=Fehler: ").concat(encodeURIComponent(e.message))))}}),void 0,void 0)}function N(){var e=S(),t=g.window.createWebviewPanel("comittoErrorLogs","Comitto Fehlerprotokolle",g.ViewColumn.One,{enableScripts:!0});t.webview.html='\n        <!DOCTYPE html>\n        <html lang="de">\n        <head>\n            <meta charset="UTF-8">\n            <meta name="viewport" content="width=device-width, initial-scale=1.0">\n            <title>Comitto Fehlerprotokolle</title>\n            <style>\n                body {\n                    font-family: var(--vscode-font-family);\n                    padding: 20px;\n                    color: var(--vscode-foreground);\n                }\n                h1 {\n                    margin-bottom: 20px;\n                }\n                .log-entry {\n                    margin-bottom: 20px;\n                    padding: 15px;\n                    background-color: var(--vscode-editor-background);\n                    border-radius: 4px;\n                    border-left: 4px solid #e74c3c;\n                }\n                .log-entry-header {\n                    display: flex;\n                    justify-content: space-between;\n                    margin-bottom: 10px;\n                }\n                .log-type {\n                    font-weight: bold;\n                    color: #e74c3c;\n                }\n                .log-timestamp {\n                    color: var(--vscode-descriptionForeground);\n                }\n                .log-message {\n                    margin-bottom: 10px;\n                }\n                .log-details-button {\n                    background: none;\n                    border: 1px solid var(--vscode-button-background);\n                    color: var(--vscode-button-background);\n                    padding: 4px 8px;\n                    border-radius: 4px;\n                    cursor: pointer;\n                }\n                .log-details {\n                    display: none;\n                    margin-top: 10px;\n                    padding: 10px;\n                    background-color: var(--vscode-editor-inactiveSelectionBackground);\n                    border-radius: 4px;\n                }\n                .log-details pre {\n                    white-space: pre-wrap;\n                    word-break: break-all;\n                }\n                .actions {\n                    margin-top: 20px;\n                }\n                button {\n                    background-color: var(--vscode-button-background);\n                    color: var(--vscode-button-foreground);\n                    border: none;\n                    padding: 8px 16px;\n                    border-radius: 4px;\n                    cursor: pointer;\n                    margin-right: 10px;\n                }\n                button:hover {\n                    background-color: var(--vscode-button-hoverBackground);\n                }\n                .no-logs {\n                    margin: 30px 0;\n                    text-align: center;\n                    font-style: italic;\n                    color: var(--vscode-descriptionForeground);\n                }\n            </style>\n        </head>\n        <body>\n            <h1>Fehlerprotokolle</h1>\n            \n            '.concat(0===e.length?'<div class="no-logs">Keine Fehlerprotokolle vorhanden</div>':e.map((function(e,t){return'\n                    <div class="log-entry">\n                        <div class="log-entry-header">\n                            <span class="log-type">'.concat(e.type,'</span>\n                            <span class="log-timestamp">').concat(e.timestamp,'</span>\n                        </div>\n                        <div class="log-message">').concat(e.message,'</div>\n                        <button class="log-details-button" onclick="toggleDetails(').concat(t,')">Details anzeigen</button>\n                        <div id="details-').concat(t,'" class="log-details">\n                            <pre>').concat(JSON.stringify(e,null,2),"</pre>\n                        </div>\n                    </div>\n                ")})).join(""),"\n            \n            <div class=\"actions\">\n                <button id=\"clearLogs\">Protokolle löschen</button>\n                <button id=\"exportLogs\">Protokolle exportieren</button>\n            </div>\n            \n            <script>\n                const vscode = acquireVsCodeApi();\n                \n                function toggleDetails(index) {\n                    const details = document.getElementById('details-' + index);\n                    const button = details.previousElementSibling;\n                    \n                    if (details.style.display === 'block') {\n                        details.style.display = 'none';\n                        button.textContent = 'Details anzeigen';\n                    } else {\n                        details.style.display = 'block';\n                        button.textContent = 'Details ausblenden';\n                    }\n                }\n                \n                document.getElementById('clearLogs').addEventListener('click', () => {\n                    vscode.postMessage({\n                        command: 'clearLogs'\n                    });\n                });\n                \n                document.getElementById('exportLogs').addEventListener('click', () => {\n                    vscode.postMessage({\n                        command: 'exportLogs',\n                        logs: ").concat(JSON.stringify(e),"\n                    });\n                });\n            <\/script>\n        </body>\n        </html>\n    "),t.webview.onDidReceiveMessage((function(e){switch(e.command){case"clearLogs":clearErrorLogs(),g.window.showInformationMessage("Fehlerprotokolle wurden gelöscht"),t.dispose();break;case"exportLogs":g.window.showSaveDialog({defaultUri:g.Uri.file(m.join(P.homedir(),"comitto_error_logs.json")),filters:{"JSON-Dateien":["json"]}}).then((function(t){t&&(h.writeFileSync(t.fsPath,JSON.stringify(e.logs,null,2)),g.window.showInformationMessage("Fehlerprotokolle wurden nach ".concat(t.fsPath," exportiert")))}))}}),void 0,void 0)}function U(){return(U=u(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L("Comitto-Erweiterung wird aktiviert","aktivierung","info"),B('Die Erweiterung "comitto" wird aktiviert.',"info"),V(t),A=v.registerUI(t),(d=g.window.createStatusBarItem(g.StatusBarAlignment.Left,100)).text="$(git-commit) Comitto: Initialisiere...",d.tooltip="Comitto: Klicke zum Aktivieren/Deaktivieren oder manuellen Commit",d.command="comitto.toggleAutoCommit",t.subscriptions.push(d),d.show(),e.next=13,K(t);case 13:n=e.sent,g.commands.executeCommand("setContext","workspaceHasGit",n),n?B("Git-Repository gefunden.","info"):B("Kein Git-Repository gefunden. Einige Funktionen sind deaktiviert.","warning"),b.registerCommands(t,A,d,_,$,Q,re),W(),g.workspace.getConfiguration("comitto").get("autoCommitEnabled")&&n?(_(t),d.text="$(sync~spin) Comitto: Aktiv",B("Comitto wurde automatisch aktiviert.","info")):n?d.text="$(git-commit) Comitto: Inaktiv":(d.text="$(warning) Comitto: Kein Git-Repo",d.tooltip="Kein Git-Repository im aktuellen Workspace gefunden",d.command=void 0),t.subscriptions.push(g.commands.registerCommand("comitto.showErrorLogs",N),g.commands.registerCommand("comitto.openDebugConsole",(function(){l||(l=g.window.createOutputChannel("Comitto Debug")),l.show()})),g.commands.registerCommand("comitto.diagnosticInfo",u(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=I(),(n=g.window.createWebviewPanel("comittoDiagnostics","Comitto Diagnose",g.ViewColumn.One,{enableScripts:!0})).webview.html='\n                    <!DOCTYPE html>\n                    <html lang="de">\n                    <head>\n                        <meta charset="UTF-8">\n                        <title>Comitto Diagnose</title>\n                        <style>\n                            body { padding: 20px; font-family: var(--vscode-font-family); }\n                            pre { background-color: var(--vscode-editor-background); padding: 15px; }\n                            button {\n                                background-color: var(--vscode-button-background);\n                                color: var(--vscode-button-foreground);\n                                border: none;\n                                padding: 8px 16px;\n                                border-radius: 4px;\n                                cursor: pointer;\n                                margin-right: 10px;\n                            }\n                        </style>\n                    </head>\n                    <body>\n                        <h1>Comitto Diagnose</h1>\n                        <pre>'.concat(JSON.stringify(t,null,2),"</pre>\n                        <button id=\"copyBtn\">In Zwischenablage kopieren</button>\n                        \n                        <script>\n                            const vscode = acquireVsCodeApi();\n                            document.getElementById('copyBtn').addEventListener('click', () => {\n                                vscode.postMessage({ command: 'copy', data: ").concat(JSON.stringify(JSON.stringify(t,null,2))," });\n                            });\n                        <\/script>\n                    </body>\n                    </html>\n                "),n.webview.onDidReceiveMessage((function(e){"copy"===e.command&&(g.env.clipboard.writeText(e.data),g.window.showInformationMessage("Diagnostische Informationen in die Zwischenablage kopiert"))}));case 4:case"end":return e.stop()}}),e)}))))),oe(t),setTimeout((function(){A&&(A.statusProvider.refresh(),A.settingsProvider.refresh(),A.quickActionsProvider.refresh())}),1500),H(t),L("Comitto-Erweiterung erfolgreich aktiviert","aktivierung","info"),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(0),j(e.t0,"Fehler beim Aktivieren der Erweiterung",!0);case 30:case"end":return e.stop()}}),e,null,[[0,27]])})))).apply(this,arguments)}function K(e){return R.apply(this,arguments)}function R(){return(R=u(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=g.workspace.workspaceFolders)&&0!==n.length){e.next=3;break}return e.abrupt("return",!1);case 3:return r=n[0].uri.fsPath,e.prev=4,e.next=7,x("git rev-parse --is-inside-work-tree",r);case 7:return console.log("Git-Repository gefunden."),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(4),console.log("Kein Git-Repository gefunden oder Git nicht verfügbar."),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}function V(e){["resources","resources/ui"].forEach((function(t){var n=g.Uri.joinPath(e.extensionUri,t).fsPath;if(!h.existsSync(n))try{h.mkdirSync(n,{recursive:!0}),console.log("Verzeichnis erstellt: ".concat(n))}catch(e){console.error("Fehler beim Erstellen des Verzeichnisses ".concat(n,":"),e)}}))}function H(e){var t=e.extension.packageJSON.version;e.globalState.get("comitto.version")!==t&&(g.window.showInformationMessage("Comitto v".concat(t," wurde aktiviert! Konfigurieren Sie es über die Seitenleiste."),"Seitenleiste öffnen","Changelog anzeigen").then((function(t){"Seitenleiste öffnen"===t?g.commands.executeCommand("workbench.view.extension.comitto-sidebar"):"Changelog anzeigen"===t&&(e.globalState.get("comitto.hasShownWelcome",!1)||g.window.showInformationMessage("Comitto wurde aktiviert! Öffnen Sie die Comitto-Seitenleiste über das Icon in der Activity Bar.","Öffnen","Nicht mehr anzeigen").then((function(t){"Öffnen"===t?g.commands.executeCommand("comitto-sidebar.focus"):"Nicht mehr anzeigen"===t&&e.globalState.update("comitto.hasShownWelcome",!0)})))})),e.globalState.update("comitto.version",t)),g.workspace.getConfiguration("comitto").get("uiSettings").showNotifications&&setTimeout((function(){g.window.activeTextEditor&&g.window.showInformationMessage("Comitto ist bereit! Verwenden Sie die Seitenleiste oder das $(git-commit) Symbol in der Statusleiste.","Einstellungen öffnen","Dashboard anzeigen").then((function(e){"Einstellungen öffnen"===e?g.commands.executeCommand("comitto.openSettings"):"Dashboard anzeigen"===e&&g.commands.executeCommand("comitto.showDashboard")}))}),2e3)}function W(){var e=g.workspace.workspaceFolders;if(e){var t=g.workspace.getConfiguration("comitto").get("gitSettings");if(t.useGitignore){var n=t.repositoryPath||e[0].uri.fsPath,r=m.join(n,".gitignore");try{if(h.existsSync(r)){var o=h.readFileSync(r,"utf8");D=f().add(o)}else D=null}catch(e){console.error("Fehler beim Laden der .gitignore-Datei:",e),D=null}}else D=null}}function _(e){if($(),g.workspace.workspaceFolders){var t=g.workspace.getConfiguration("comitto").get("triggerRules"),n=t.filePatterns||["**/*"];(p=g.workspace.createFileSystemWatcher(1===n.length?n[0]:"{"+n.join(",")+"}")).onDidChange((function(e){J(e.fsPath)||(E.add(e.fsPath),Z())})),p.onDidCreate((function(e){J(e.fsPath)||(E.add(e.fsPath),Z())})),p.onDidDelete((function(e){J(e.fsPath)||(E.add(e.fsPath),Z())})),e.subscriptions.push(p),t.onInterval&&q(t.intervalMinutes)}else g.window.showErrorMessage("Comitto: Kein Workspace gefunden.")}function q(e){F&&(clearInterval(F),F=null),e>0&&(F=setInterval((function(){g.workspace.getConfiguration("comitto").get("autoCommitEnabled")&&E.size>0&&(g.workspace.getConfiguration("comitto").get("notifications").onTriggerFired&&re("Intervall-Trigger aktiviert. Prüfe auf ausstehende Commits...","info"),Z())}),60*e*1e3))}function $(){p&&(p.dispose(),p=null),F&&(clearInterval(F),F=null),E.clear()}function J(e){if(e.includes("node_modules")||e.includes(".git"))return!0;if(D){var t=g.workspace.workspaceFolders;if(t){var n=m.relative(t[0].uri.fsPath,e).replace(/\\/g,"/");return D.ignores(n)}}return!1}function Z(){if(!M){var e=g.workspace.getConfiguration("comitto").get("triggerRules"),t=e.specificFiles||[],n=t.length>0&&t.some((function(e){return(t=E,function(e){if(Array.isArray(e))return s(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).some((function(t){return t.includes(e)}));var t})),r=E.size>=(e.minChangeCount||10),o=E.size>=(e.fileCountThreshold||3),i=60*(e.timeThresholdMinutes||30)*1e3;(!O||Date.now()-O.getTime()>=i)&&(n||r||o)&&Q()}}function Q(){return Y.apply(this,arguments)}function Y(){return Y=u(i().mark((function e(){var t,n,r,o,a,s,c,u,l,p,m,h,f,v,w,k,y,C,S,I,P=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=P.length>0&&void 0!==P[0]&&P[0],n=P.length>1&&void 0!==P[1]?P[1]:0,r=3,e.prev=3,M=!0,d.text="$(sync~spin) Comitto: Commit wird vorbereitet...",o=g.workspace.workspaceFolders){e.next=9;break}throw new Error("Kein Workspace gefunden.");case 9:return a=g.workspace.getConfiguration("comitto"),s=a.get("gitSettings"),c=s.repositoryPath||o[0].uri.fsPath,e.prev=12,e.prev=13,e.next=16,x("git rev-parse --is-inside-work-tree",c);case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(13),new Error("Kein Git-Repository gefunden. Bitte initialisieren Sie zuerst ein Git-Repository.");case 21:return e.prev=21,e.next=24,te(s.stageMode);case 24:e.next=32;break;case 26:return e.prev=26,e.t1=e.catch(21),console.error("Fehler beim Stagen der Änderungen:",e.t1),re("Fehler beim Stagen: ".concat(e.t1.message,". Versuche Fallback-Methode..."),"warning"),e.next=32,x("git add .",c);case 32:return u="",e.prev=33,e.next=36,x("git status --porcelain",c);case 36:u=e.sent,e.next=43;break;case 39:e.prev=39,e.t2=e.catch(33),console.warn("Fehler bei git status, versuche trotzdem fortzufahren:",e.t2),u="Fehler beim Abrufen des Status. Commit wird trotzdem versucht.";case 43:if(u.trim()||t){e.next=50;break}return M=!1,d.text="$(sync~spin) Comitto: Aktiv",E.clear(),e.abrupt("return");case 50:if(u.trim()||!t){e.next=52;break}throw new Error("Keine Änderungen zum Committen gefunden.");case 52:return l="",e.prev=53,d.text="$(sync~spin) Comitto: Diff wird berechnet...",e.next=57,x("git diff --cached",c);case 57:l=e.sent,e.next=74;break;case 60:return e.prev=60,e.t3=e.catch(53),console.warn("Fehler beim Abrufen des Diffs, versuche alternative Methode:",e.t3),e.prev=63,e.next=66,x("git diff --cached --name-status",c);case 66:p=e.sent,l="Diff konnte nicht vollständig abgerufen werden.\nGeänderte Dateien:\n"+p,e.next=74;break;case 70:e.prev=70,e.t4=e.catch(63),console.error("Auch die Dateiliste konnte nicht abgerufen werden:",e.t4),l="Diff-Inhalt konnte nicht abgerufen werden. Commit wird trotzdem versucht.";case 74:return d.text="$(sync~spin) Comitto: Generiere Commit-Nachricht...",m="",e.prev=76,e.next=79,b.generateCommitMessage(u,l);case 79:m=e.sent,e.next=92;break;case 82:e.prev=82,e.t5=e.catch(76),console.error("Fehler bei der Commit-Nachricht-Generierung:",e.t5),h=new Date,f="".concat(h.getFullYear(),"-").concat(String(h.getMonth()+1).padStart(2,"0"),"-").concat(String(h.getDate()).padStart(2,"0")),v="".concat(String(h.getHours()).padStart(2,"0"),":").concat(String(h.getMinutes()).padStart(2,"0")),w=a.get("gitSettings"),k=w.commitMessageLanguage||"en",y=w.commitMessageStyle||"conventional",m="de"===k?"conventional"===y?"chore: Automatischer Commit vom ".concat(f," ").concat(v):"💾 Automatischer Commit vom ".concat(f," ").concat(v):"conventional"===y?"chore: automatic commit ".concat(f," ").concat(v):"💾 Automatic commit ".concat(f," ").concat(v);case 92:if(m&&0!==m.trim().length||(m="chore: auto commit"),e.prev=93,!s.branch){e.next=125;break}return d.text="$(sync~spin) Comitto: Prüfe Branch...",e.next=98,x("git rev-parse --abbrev-ref HEAD",c);case 98:if(e.sent.trim()===s.branch){e.next=125;break}return e.next=102,x("git branch",c);case 102:if(!e.sent.includes(s.branch)){e.next=116;break}return e.prev=105,e.next=108,x("git checkout ".concat(s.branch),c);case 108:re("Zu Branch '".concat(s.branch,"' gewechselt."),"info"),e.next=114;break;case 111:e.prev=111,e.t6=e.catch(105),re("Fehler beim Wechseln zu Branch '".concat(s.branch,"': ").concat(e.t6.message,". Fortfahren mit aktuellem Branch."),"warning");case 114:e.next=125;break;case 116:return e.prev=116,e.next=119,x("git checkout -b ".concat(s.branch),c);case 119:re("Branch '".concat(s.branch,"' erstellt und ausgecheckt."),"info"),e.next=125;break;case 122:e.prev=122,e.t7=e.catch(116),re("Fehler beim Erstellen des Branches '".concat(s.branch,"': ").concat(e.t7.message,". Fortfahren mit aktuellem Branch."),"warning");case 125:e.next=131;break;case 127:e.prev=127,e.t8=e.catch(93),console.error("Fehler beim Branch-Handling:",e.t8),re("Fehler bei der Branch-Verwaltung: ".concat(e.t8.message,". Fortfahren mit aktuellem Branch."),"warning");case 131:return d.text="$(sync~spin) Comitto: Führe Commit aus...",e.prev=132,C=m.replace(/"/g,'\\"').replace(/`/g,"'"),e.next=136,x('git commit -m "'.concat(C,'"'),c);case 136:S=a.get("notifications"),!t&&S.onCommit?re("Automatischer Commit durchgeführt: ".concat(m),"info"):t&&re("Manueller Commit durchgeführt: ".concat(m),"info"),O=new Date,E.clear(),e.next=158;break;case 142:if(e.prev=142,e.t9=e.catch(132),console.error("Commit fehlgeschlagen:",e.t9),!e.t9.message.includes("nothing to commit")){e.next=151;break}return re("Keine Änderungen zum Committen gefunden.","info"),M=!1,d.text="$(sync~spin) Comitto: Aktiv",E.clear(),e.abrupt("return");case 151:if(!(n<r)){e.next=157;break}return re("Commit fehlgeschlagen: ".concat(e.t9.message,". Versuche es erneut..."),"warning"),setTimeout((function(){Q(t,n+1)}),2e3),e.abrupt("return");case 157:throw new Error("Commit fehlgeschlagen nach ".concat(r," Versuchen: ").concat(e.t9.message));case 158:if(!s.autoPush){e.next=168;break}return e.prev=159,e.next=162,X(c);case 162:e.next=168;break;case 164:e.prev=164,e.t10=e.catch(159),console.error("Push fehlgeschlagen:",e.t10),re("Push fehlgeschlagen: ".concat(e.t10.message),"error");case 168:d.text="$(sync~spin) Comitto: Aktiv",e.next=180;break;case 171:throw e.prev=171,e.t11=e.catch(12),console.error("Git-Befehl fehlgeschlagen:",e.t11),(I=e.t11.message).includes("fatal: not a git repository")?I="Dieses Verzeichnis ist kein Git-Repository. Bitte initialisieren Sie zuerst ein Git-Repository.":I.includes("fatal: unable to access")?I="Fehler beim Zugriff auf das Remote-Repository. Bitte prüfen Sie Ihre Netzwerkverbindung und Zugangsrechte.":(I.includes("maxBuffer")||I.includes("zu groß"))&&(I="Zu viele oder zu große Änderungen für die automatische Verarbeitung. Bitte führen Sie einen manuellen Commit durch oder reduzieren Sie die Anzahl der Änderungen."),a.get("notifications").onError&&re("Git-Befehl fehlgeschlagen: ".concat(I),"error"),d.text="$(sync~spin) Comitto: Aktiv",e.t11;case 180:e.next=188;break;case 182:e.prev=182,e.t12=e.catch(3),console.error("Comitto Fehler:",e.t12),g.workspace.getConfiguration("comitto").get("notifications").onError&&re("Comitto Fehler: ".concat(e.t12.message),"error"),d.text="$(sync~spin) Comitto: Aktiv";case 188:return e.prev=188,M=!1,e.finish(188);case 191:case"end":return e.stop()}}),e,null,[[3,182,188,191],[12,171],[13,18],[21,26],[33,39],[53,60],[63,70],[76,82],[93,127],[105,111],[116,122],[132,142],[159,164]])}))),Y.apply(this,arguments)}function X(e){return ee.apply(this,arguments)}function ee(){return(ee=u(i().mark((function e(t){var n,r,o,a,s,c,u,l,p,m,h,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.workspace.getConfiguration("comitto"),r=n.get("notifications"),o=2,d.text="$(sync~spin) Comitto: Pushe Änderungen...",e.prev=4,e.next=7,x("git rev-parse --abbrev-ref HEAD",t);case 7:a=e.sent.trim(),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),new Error("Fehler beim Ermitteln des aktuellen Branches: ".concat(e.t0.message));case 13:s=n.get("gitSettings"),c=s.pushOptions||"",u="git push origin ".concat(a," ").concat(c).trim(),l=!1,p=null,m=i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(u,t);case 3:return l=!0,e.abrupt("return",0);case 7:if(e.prev=7,e.t0=e.catch(0),p=e.t0,console.warn("Push-Versuch ".concat(n+1," fehlgeschlagen:"),e.t0),!(e.t0.message.includes("Connection timed out")||e.t0.message.includes("Could not resolve host")||e.t0.message.includes("failed to push some refs"))){e.next=16;break}if(!(n<o)){e.next=16;break}return e.next=15,new Promise((function(e){return setTimeout(e,2e3*(n+1))}));case 15:return e.abrupt("return",1);case 16:return e.abrupt("return",0);case 17:case"end":return e.stop()}}),e,null,[[0,7]])})),f=0;case 20:if(!(f<=o)){e.next=30;break}return e.delegateYield(m(f),"t1",22);case 22:if(0!==(h=e.t1)){e.next=25;break}return e.abrupt("break",30);case 25:if(1!==h){e.next=27;break}return e.abrupt("continue",27);case 27:f++,e.next=20;break;case 30:if(!l){e.next=34;break}r.onPush&&re("Änderungen wurden zu origin/".concat(a," gepusht."),"info"),e.next=51;break;case 34:if(!p){e.next=51;break}if(!(p.message.includes("failed to push some refs")||p.message.includes("rejected")||p.message.includes("non-fast-forward"))){e.next=50;break}return e.prev=36,re("Push fehlgeschlagen. Versuche Pull...","warning"),e.next=40,x("git pull origin ".concat(a),t);case 40:return e.next=42,x(u,t);case 42:r.onPush&&re("Pull & Push erfolgreich: Änderungen wurden zu origin/".concat(a," gepusht."),"info"),e.next=48;break;case 45:throw e.prev=45,e.t2=e.catch(36),new Error("Push fehlgeschlagen und Pull konnte nicht ausgeführt werden: ".concat(e.t2.message));case 48:e.next=51;break;case 50:throw p;case 51:case"end":return e.stop()}}),e,null,[[4,10],[36,45]])})))).apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=u(i().mark((function e(t){var n,r,a,s,c,u,l,d,p,m,h,f,b,w,k;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=g.workspace.workspaceFolders){e.next=3;break}throw new Error("Kein Workspace gefunden.");case 3:if(r=g.workspace.getConfiguration("comitto"),a=r.get("gitSettings"),s=a.repositoryPath||n[0].uri.fsPath,"prompt"!==t){e.next=36;break}return e.next=9,x("git status --porcelain",s);case 9:if((c=e.sent).trim()){e.next=12;break}throw new Error("Keine Änderungen zum Stagen gefunden.");case 12:return u=c.split("\n").filter((function(e){return e.trim().length>0})).map((function(e){return{status:e.substring(0,2).trim(),filePath:e.substring(3).trim()}})),e.next=15,g.window.showQuickPick(u.map((function(e){return{label:e.filePath,description:v.getStatusDescription(e.status),picked:!0}})),{canPickMany:!0,placeHolder:"Dateien zum Stagen auswählen"});case 15:if((l=e.sent)&&0!==l.length){e.next=18;break}throw new Error("Keine Dateien ausgewählt.");case 18:d=o(l),e.prev=19,d.s();case 21:if((p=d.n()).done){e.next=27;break}return m=p.value,e.next=25,x('git add "'.concat(m.label,'"'),s);case 25:e.next=21;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(19),d.e(e.t0);case 32:return e.prev=32,d.f(),e.finish(32);case 35:return e.abrupt("return");case 36:if("specific"!==t){e.next=63;break}h=a.specificStagingPatterns||["**/*.js","**/*.ts","**/*.json"],f=o(h),e.prev=39,f.s();case 41:if((b=f.n()).done){e.next=54;break}return w=b.value,e.prev=43,k=w.replace(/\\/g,"/"),e.next=47,x('git add "'.concat(k,'"'),s);case 47:e.next=52;break;case 49:e.prev=49,e.t1=e.catch(43),console.error("Fehler beim Stagen von Muster ".concat(w,":"),e.t1);case 52:e.next=41;break;case 54:e.next=59;break;case 56:e.prev=56,e.t2=e.catch(39),f.e(e.t2);case 59:return e.prev=59,f.f(),e.finish(59);case 62:return e.abrupt("return");case 63:return e.next=65,x("git add .",s);case 65:case"end":return e.stop()}}),e,null,[[19,29,32,35],[39,56,59,62],[43,49]])})))).apply(this,arguments)}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=g.workspace.getConfiguration("comitto"),r=n.get("uiSettings");if(n.get("debug"),B(e,t),r&&r.showNotifications)switch(t){case"info":default:g.window.showInformationMessage(e);break;case"warning":g.window.showWarningMessage(e);break;case"error":g.window.showErrorMessage(e)}if("error"===t&&d){var o=d.text;d.text="$(error) Comitto: Fehler",setTimeout((function(){d&&(d.text=o)}),3e3)}}function oe(e){setInterval(u(i().mark((function t(){var n,r,o,a,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(n=g.workspace.getConfiguration("comitto")).get("autoCommitEnabled")){t.next=4;break}return t.abrupt("return");case 4:return r=n.get("debug")||{},t.next=7,K(e);case 7:if(t.sent){t.next=11;break}return B("Hintergrundprüfung: Kein aktives Git-Repository gefunden.","warning"),t.abrupt("return");case 11:if(o=g.workspace.workspaceFolders){t.next=14;break}return t.abrupt("return");case 14:return a=o[0].uri.fsPath,t.next=17,x("git status --porcelain",a);case 17:(s=t.sent).trim()&&0===E.size&&(B("Hintergrundprüfung: Nicht erfasste Änderungen gefunden.","info"),s.split("\n").filter((function(e){return e.trim().length>0})).forEach((function(e){var t=e.substring(3).trim();if(t&&!J(t)){var n=m.resolve(a,t);E.add(n)}})),r.extendedLogging&&B("Hintergrund-Synchronisierung: ".concat(E.size," Dateien werden nun überwacht."),"info"),n.get("autoCommitEnabled")&&Z()),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(0),console.error("Fehler bei der Hintergrundüberwachung:",t.t0),B("Fehler bei der Hintergrundüberwachung: ".concat(t.t0.message),"error");case 25:case"end":return t.stop()}}),t,null,[[0,21]])}))),6e5),setInterval((function(){try{var t=g.workspace.getConfiguration("comitto");if(!t.get("autoCommitEnabled"))return;var n=t.get("debug")||{};!p&&t.get("autoCommitEnabled")&&(B("Gesundheitscheck: FileWatcher ist nicht aktiv. Starte neu...","warning"),_(e));var r=t.get("triggerRules");r.onInterval&&!F&&t.get("autoCommitEnabled")&&(B("Gesundheitscheck: Interval-Timer ist nicht aktiv. Starte neu...","warning"),q(r.intervalMinutes)),n.extendedLogging&&B("Gesundheitscheck durchgeführt.","info")}catch(e){console.error("Fehler beim Gesundheitscheck:",e),B("Fehler beim Gesundheitscheck: ".concat(e.message),"error")}}),18e5)}e.exports={activate:function(e){return U.apply(this,arguments)},deactivate:function(){$(),d&&d.dispose()},debugLog:L,handleError:j}},857:e=>{"use strict";e.exports=require("os")},1398:e=>{"use strict";e.exports=require("vscode")},1449:(e,t,n)=>{function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(){"use strict";d=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var i=t&&t.prototype instanceof w?t:w,a=Object.create(i.prototype),s=new F(r||[]);return o(a,"_invoke",{value:M(e,n,s)}),a}function g(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var m="suspendedStart",h="suspendedYield",f="executing",v="completed",b={};function w(){}function x(){}function k(){}var y={};l(y,a,(function(){return this}));var C=Object.getPrototypeOf,S=C&&C(C(T([])));S&&S!==n&&r.call(S,a)&&(y=S);var I=k.prototype=w.prototype=Object.create(y);function P(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(o,i,a,c){var u=g(e[o],e,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==s(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function M(t,n,r){var o=m;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=O(s,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var u=g(t,n,r);if("normal"===u.type){if(o=r.done?v:h,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function O(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=g(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(s(t)+" is not iterable")}return x.prototype=k,o(I,"constructor",{value:k,configurable:!0}),o(k,"constructor",{value:x,configurable:!0}),x.displayName=l(k,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,l(e,u,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},P(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new E(p(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(I),l(I,u,"Generator"),l(I,a,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function p(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){p(i,r,o,a,s,"next",e)}function s(e){p(i,r,o,a,s,"throw",e)}a(void 0)}))}}var m=n(1398),h=n(9829),f=n(4518),v=f.executeGitCommand,b=f.getStatusText,w=n(9329);function x(e,t,n,r){return k.apply(this,arguments)}function k(){return(k=g(d().mark((function e(t,n,r,o){var i,a,s,c,l,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=m.workspace.getConfiguration("comitto"),a=u({},i.get("triggerRules")),s=a[t],"",c="patterns"===o||"files"===o?Array.isArray(s)?s.join(", "):"":void 0!==s?s.toString():"",e.next=7,m.window.showInputBox({value:c,prompt:n,placeHolder:r,validateInput:function(e){if("number"===o){if(!e)return"Eingabe darf nicht leer sein.";var n=parseInt(e);if(isNaN(n)||n<("intervalMinutes"===t||"timeThresholdMinutes"===t?1:0))return"Bitte geben Sie eine gültige positive Zahl ein."}return null}});case 7:if(void 0===(l=e.sent)){e.next=14;break}return"number"===o?p=parseInt(l):"patterns"===o||"files"===o?(p=l.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length>0})),"patterns"===o&&0===p.length&&(p=["**/*"])):p=l,a[t]=p,e.next=13,i.update("triggerRules",a,m.ConfigurationTarget.Global);case 13:m.window.showInformationMessage("".concat(n," aktualisiert."));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return C.apply(this,arguments)}function C(){return(C=g(d().mark((function e(t,n){var r,o,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=m.workspace.getConfiguration("comitto"),o=r.get("triggerRules")||{},i=!o[t],a=u(u({},o),{},l({},t,i)),e.next=7,r.update("triggerRules",a,m.ConfigurationTarget.Global);case 7:if(m.window.showInformationMessage("".concat(n," wurde ").concat(i?"aktiviert":"deaktiviert",".")),"onInterval"!==t||!i||o.intervalMinutes&&!(o.intervalMinutes<=0)){e.next=11;break}return e.next=11,x("intervalMinutes","Intervall (Minuten)","z.B. 5","number");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m.window.showErrorMessage("Fehler beim Umschalten von ".concat(n,": ").concat(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function S(e,t,n){return I.apply(this,arguments)}function I(){return(I=g(d().mark((function e(t,n,r){var o,i,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=m.workspace.getConfiguration("comitto"),i=u({},o.get("gitSettings")),a=i[t],e.next=5,m.window.showInputBox({value:void 0!==a?a.toString():"",prompt:n,placeHolder:r});case 5:if(void 0===(s=e.sent)){e.next=11;break}return i[t]=s,e.next=10,o.update("gitSettings",i,m.ConfigurationTarget.Global);case 10:m.window.showInformationMessage("".concat(n," aktualisiert."));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return E.apply(this,arguments)}function E(){return(E=g(d().mark((function e(t,n){var r,o,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.workspace.getConfiguration("comitto"),o=u({},r.get("gitSettings")),i=!o[t],o[t]=i,e.next=6,r.update("gitSettings",o,m.ConfigurationTarget.Global);case 6:m.window.showInformationMessage("".concat(n," ").concat(i?"aktiviert":"deaktiviert","."));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,n){return O.apply(this,arguments)}function O(){return(O=g(d().mark((function e(t,n,r){var o,i,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=m.workspace.getConfiguration("comitto"),i=u({},o.get("gitSettings")),a=i[t],e.next=5,m.window.showQuickPick(r.map((function(e){return u(u({},e),{},{description:a===e.value?"(Aktuell)":""})})),{placeHolder:n,ignoreFocusOut:!0});case 5:if(!(s=e.sent)){e.next=11;break}return i[t]=s.value,e.next=10,o.update("gitSettings",i,m.ConfigurationTarget.Global);case 10:m.window.showInformationMessage("".concat(n,' auf "').concat(s.label,'" gesetzt.'));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return A.apply(this,arguments)}function A(){return(A=g(d().mark((function e(t,n){var r,o,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.workspace.getConfiguration("comitto"),o=u({},r.get("uiSettings")),i=!o[t],o[t]=i,e.next=6,r.update("uiSettings",o,m.ConfigurationTarget.Global);case 6:"showNotifications"===t?m.window.showInformationMessage("".concat(n," wurden ").concat(i?"aktiviert":"deaktiviert",".")):o.showNotifications&&m.window.showInformationMessage("".concat(n," wurde ").concat(i?"aktiviert":"deaktiviert","."));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return T.apply(this,arguments)}function T(){return(T=g(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.workspace.getConfiguration("comitto"),n=t.get("openai.apiKey"),e.next=4,m.window.showInputBox({value:n,prompt:"Geben Sie Ihren OpenAI API-Schlüssel ein",placeHolder:"sk-...",password:!0,ignoreFocusOut:!0});case 4:if(void 0===(r=e.sent)){e.next=9;break}return e.next=8,t.update("openai.apiKey",r,m.ConfigurationTarget.Global);case 8:m.window.showInformationMessage("OpenAI API-Schlüssel aktualisiert.");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return L.apply(this,arguments)}function L(){return(L=g(d().mark((function e(){var t,n,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.workspace.getConfiguration("comitto"),n=t.get("anthropic.model"),r=["claude-3-haiku-20240307","claude-3-sonnet-20240229","claude-3-opus-20240229","claude-2.1","claude-2.0","claude-instant-1.2"],e.next=5,m.window.showQuickPick(r.map((function(e){return{label:e,description:e===n?"(Aktuell)":""}})),{placeHolder:"Claude-Modell auswählen",ignoreFocusOut:!0});case 5:if(!(o=e.sent)){e.next=10;break}return e.next=9,t.update("anthropic.model",o.label,m.ConfigurationTarget.Global);case 9:m.window.showInformationMessage("Anthropic-Modell auf ".concat(o.label," gesetzt."));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return z.apply(this,arguments)}function z(){return(z=g(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.workspace.getConfiguration("comitto"),n=t.get("anthropic.apiKey"),e.next=4,m.window.showInputBox({value:n,prompt:"Geben Sie Ihren Anthropic API-Schlüssel ein",placeHolder:"sk-ant-...",password:!0,ignoreFocusOut:!0});case 4:if(void 0===(r=e.sent)){e.next=9;break}return e.next=8,t.update("anthropic.apiKey",r,m.ConfigurationTarget.Global);case 8:m.window.showInformationMessage("Anthropic API-Schlüssel aktualisiert.");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return N.apply(this,arguments)}function N(){return N=g(d().mark((function e(){var t,n,r,o,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.workspace.getConfiguration("comitto"),n=t.get("promptTemplate"),e.prev=2,e.next=5,m.workspace.openTextDocument({content:n,language:"markdown"});case 5:return r=e.sent,e.next=8,m.window.showTextDocument(r);case 8:o=m.workspace.onDidSaveTextDocument(function(){var e=g(d().mark((function e(i){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i!==r){e.next=7;break}if((a=i.getText())===n){e.next=6;break}return e.next=5,t.update("promptTemplate",a,m.ConfigurationTarget.Global);case 5:m.window.showInformationMessage("Prompt-Vorlage wurde gespeichert.");case 6:o.dispose();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i=m.workspace.onDidCloseTextDocument((function(e){e===r&&(o.dispose(),i.dispose())})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),m.window.showErrorMessage("Fehler beim Öffnen der Prompt-Vorlage: ".concat(e.t0.message)),console.error("Fehler bei handleEditPromptTemplateCommand:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),N.apply(this,arguments)}function U(e){return K.apply(this,arguments)}function K(){return K=g(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(n=t.globalState.get("comittoDashboardPanelInstance"))&&"function"==typeof n.reveal?n.reveal(m.ViewColumn.One):(n&&(t.globalState.update("comittoDashboardPanelInstance",void 0),console.log("Ungültiges Dashboard-Panel gefunden und zurückgesetzt")),n=m.window.createWebviewPanel("comittoDashboard","Comitto Dashboard",m.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[m.Uri.joinPath(t.extensionUri,"resources")]}),t.globalState.update("comittoDashboardPanelInstance",n),n.onDidDispose((function(){t.globalState.update("comittoDashboardPanelInstance",void 0),n=void 0}),null,t.subscriptions),n.webview.onDidReceiveMessage(function(){var e=g(d().mark((function e(r){var o,i,a,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=r.command,e.next="refresh"===e.t0?4:"toggleAutoCommit"===e.t0?6:"manualCommit"===e.t0?20:"openSettings"===e.t0?22:"configureProvider"===e.t0?24:"configureTriggers"===e.t0?26:28;break;case 4:try{(o=t.globalState.get("comittoDashboardPanelInstance"))&&"object"===s(o.webview)?o.webview.html=R(t,o):console.warn("Versuch, HTML für ein nicht mehr existierendes Dashboard zu aktualisieren.")}catch(e){console.error("Fehler beim Aktualisieren des Dashboards:",e),m.window.showErrorMessage("Fehler beim Aktualisieren des Dashboards: ".concat(e.message))}return e.abrupt("break",28);case 6:return e.prev=6,i=m.workspace.getConfiguration("comitto"),a=!i.get("autoCommitEnabled"),e.next=11,i.update("autoCommitEnabled",a,m.ConfigurationTarget.Global);case 11:(c=t.globalState.get("comittoDashboardPanelInstance"))&&"object"===s(c.webview)&&(c.webview.html=R(t,c)),e.next=19;break;case 15:e.prev=15,e.t1=e.catch(6),console.error("Fehler beim Umschalten des Auto-Commit-Status:",e.t1),m.window.showErrorMessage("Fehler beim Umschalten des Auto-Commit-Status: ".concat(e.t1.message));case 19:return e.abrupt("break",28);case 20:return m.commands.executeCommand("comitto.performManualCommit"),e.abrupt("break",28);case 22:return m.commands.executeCommand("comitto.openSettings"),e.abrupt("break",28);case 24:return m.commands.executeCommand("comitto.configureAIProvider"),e.abrupt("break",28);case 26:return m.commands.executeCommand("comitto.configureTriggers"),e.abrupt("break",28);case 28:e.next=34;break;case 30:e.prev=30,e.t2=e.catch(0),console.error("Fehler bei der Verarbeitung des Dashboard-Befehls:",e.t2),n&&n.webview&&"function"==typeof n.webview.postMessage&&n.webview.postMessage({type:"error",content:"Fehler bei der Befehlsverarbeitung: ".concat(e.t2.message)});case 34:case"end":return e.stop()}}),e,null,[[0,30],[6,15]])})));return function(t){return e.apply(this,arguments)}}(),void 0,t.subscriptions));try{n.webview.html=R(t,n)}catch(e){console.error("Fehler beim Generieren des Dashboard-HTML:",e),m.window.showErrorMessage("Fehler beim Öffnen des Dashboards: ".concat(e.message)),n.webview.html="\n                <html><body><h1>Fehler beim Laden des Dashboards</h1><p>".concat(e.message,"</p></body></html>\n            ")}}catch(e){console.error("Fehler beim Öffnen des Dashboards:",e),m.window.showErrorMessage("Fehler beim Öffnen des Comitto-Dashboards: ".concat(e.message))}case 1:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function R(e,t){if(!t||!t.webview)return console.error("generateDashboardHTML: Panel oder Webview ist nicht verfügbar."),"<html><body><h1>Fehler beim Initialisieren des Dashboards</h1>\n                <p>Das Webview-Panel ist nicht verfügbar. Bitte schließen Sie das Dashboard und versuchen Sie es erneut.</p></body></html>";var r=m.workspace.getConfiguration("comitto"),o=r.get("autoCommitEnabled"),i=r.get("aiProvider"),a=r.get("triggerRules"),s=r.get("gitSettings"),c=h.getProviderDisplayName(i),u=h.getProviderIcon(i),l="";switch(i){case"ollama":l=r.get("ollama.model");break;case"openai":l=r.get("openai.model");break;case"anthropic":l=r.get("anthropic.model")}var d=m.Uri.joinPath(e.extensionUri,"resources","ui","dashboard.js"),p=m.Uri.joinPath(e.extensionUri,"resources","ui","styles.css"),g=m.Uri.joinPath(e.extensionUri,"resources","ui","animations.css"),f=m.Uri.joinPath(e.extensionUri,"resources","icon.svg"),v=t.webview.asWebviewUri(d),b=t.webview.asWebviewUri(p),w=t.webview.asWebviewUri(g),x=t.webview.asWebviewUri(f),k=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<32;n++)e+=t.charAt(Math.floor(62*Math.random()));return e}(),y="0.9.6";try{var C=m.Uri.joinPath(e.extensionUri,"package.json").fsPath;y=JSON.parse(n(9896).readFileSync(C,"utf8")).version||y}catch(e){console.error("Fehler beim Lesen der package.json für Version",e)}return'\n    <!DOCTYPE html>\n    <html lang="en">\n    <head>\n        <meta charset="UTF-8">\n        \x3c!-- Content Security Policy --\x3e\n        <meta http-equiv="Content-Security-Policy" content="default-src \'none\'; style-src '.concat(t.webview.cspSource," https://cdn.jsdelivr.net 'unsafe-inline'; font-src https://fonts.gstatic.com; img-src ").concat(t.webview.cspSource," https: data:; script-src 'nonce-").concat(k,'\' https://cdn.jsdelivr.net; connect-src \'none\';">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        \n        \x3c!-- Tailwind CSS --\x3e\n        <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">\n        \n        \x3c!-- Custom Styles --\x3e\n        <link href="').concat(b,'" rel="stylesheet">\n        <link href="').concat(w,'" rel="stylesheet">\n        \n        \x3c!-- Google Fonts - Inter --\x3e\n        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">\n        \n        <title>Comitto Dashboard</title>\n    </head>\n    <body class="vscode-dark">\n        <div class="container glass-container animated-bg">\n            <div class="dashboard-header">\n                <div class="flex items-center gap-4">\n                    <img src="').concat(x,'" alt="Comitto Logo" class="h-12 w-12 floating-element"/>\n                    <h1 class="dashboard-title typing">Comitto Dashboard</h1>\n                </div>\n                <button id="refreshBtn" class="btn btn-icon" title="Refresh">\n                    <span class="icon">🔄</span>\n                </button>\n            </div>\n            \n            <div class="flex justify-between items-center mb-6 fade-in" style="animation-delay: 0.2s">\n                <div class="status ').concat(o?"status-enabled":"status-disabled",' flex items-center">\n                    <span class="status-indicator ').concat(o?"status-active":"status-inactive",'"></span>\n                    <span><strong>Status:</strong> Comitto is currently ').concat(o?"enabled":"disabled",'</span>\n                </div>\n                \n                <div class="flex gap-2">\n                    <button id="commitBtn" class="btn hover-lift" title="Generate a commit now with AI">\n                        <span class="icon">💾</span> Manual Commit\n                    </button>\n                    <button id="toggleBtn" class="btn ').concat(o?"btn-danger":"btn-secondary",' hover-lift" data-enabled="').concat(o,'" title="Toggle automatic commits">\n                        <span class="icon">').concat(o?"🚫":"✅","</span> ").concat(o?"Disable":"Enable",'\n                    </button>\n                </div>\n            </div>\n            \n            <div class="dashboard fade-in" style="animation-delay: 0.4s">\n                \x3c!-- AI Configuration --\x3e\n                <div class="card interactive">\n                    <div class="card-header">\n                        <h2 class="card-title">\n                            <span class="icon">').concat(u.id?"$(".concat(u.id,")"):"🧠",'</span> AI Configuration\n                        </h2>\n                        <span class="badge badge-primary">\n                            ').concat(c,'\n                        </span>\n                    </div>\n                    <div class="card-content">\n                        <p class="mb-2"><strong>Model:</strong> ').concat(l||"Not set",'</p>\n                        <div class="flex justify-center mt-4">\n                            <button id="configureAIBtn" class="btn btn-secondary hover-lift">\n                                <span class="icon">⚙️</span> Configure AI\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                \n                \x3c!-- Trigger Rules --\x3e\n                <div class="card interactive">\n                    <div class="card-header">\n                        <h2 class="card-title">\n                            <span class="icon">⚙️</span> Trigger Rules\n                        </h2>\n                        <span class="badge ').concat(a.onSave||a.onInterval?"badge-success":"badge-danger",'">\n                            ').concat(a.onSave||a.onInterval?"Active":"Inactive",'\n                        </span>\n                    </div>\n                    <div class="card-content">\n                        <div class="grid grid-cols-2 gap-2 mb-3">\n                            <div>\n                                <p><strong>File Count:</strong></p>\n                                <span class="badge">').concat(a.fileCountThreshold,'</span>\n                            </div>\n                            <div>\n                                <p><strong>Change Count:</strong></p>\n                                <span class="badge">').concat(a.minChangeCount,'</span>\n                            </div>\n                            <div>\n                                <p><strong>Time Threshold:</strong></p>\n                                <span class="badge">').concat(a.timeThresholdMinutes,' Min.</span>\n                            </div>\n                            <div>\n                                <p><strong>Active Triggers:</strong></p>\n                                <div class="flex flex-wrap gap-1">\n                                    ').concat(a.onSave?'<span class="badge badge-success">On Save</span>':"","\n                                    ").concat(a.onInterval?'<span class="badge badge-success">Interval ('.concat(a.intervalMinutes," Min.)</span>"):"","\n                                    ").concat(a.onBranchSwitch?'<span class="badge badge-success">Branch Switch</span>':"","\n                                    ").concat(a.onSave||a.onInterval||a.onBranchSwitch?"":'<span class="badge badge-danger">None</span>','\n                                </div>\n                            </div>\n                        </div>\n                        <div class="flex justify-center">\n                            <button id="configureTriggersBtn" class="btn btn-secondary hover-lift">\n                                <span class="icon">⚙️</span> Configure Triggers\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                \n                \x3c!-- Git Settings --\x3e\n                <div class="card interactive">\n                    <div class="card-header">\n                        <h2 class="card-title">\n                            <span class="icon">📝</span> Git Settings\n                        </h2>\n                        <span class="badge badge-primary">\n                            ').concat("de"===s.commitMessageLanguage?"German":"English",'\n                        </span>\n                    </div>\n                    <div class="card-content">\n                        <div class="grid grid-cols-2 gap-2 mb-3">\n                            <div>\n                                <p><strong>Auto-Push:</strong></p>\n                                <span class="badge ').concat(s.autoPush?"badge-success":"badge-danger",'">\n                                    ').concat(s.autoPush?"Yes":"No",'\n                                </span>\n                            </div>\n                            <div>\n                                <p><strong>Branch:</strong></p>\n                                <span class="badge tooltip">\n                                    ').concat(s.branch||"Current Branch",'\n                                    <span class="tooltip-text">Active for ').concat(s.branch||"current branch",'</span>\n                                </span>\n                            </div>\n                            <div>\n                                <p><strong>Commit Style:</strong></p>\n                                <span class="badge">').concat(s.commitMessageStyle,'</span>\n                            </div>\n                            <div>\n                                <p><strong>Staging Mode:</strong></p>\n                                <span class="badge">').concat(h.getStageModeLabel(s.stageMode),'</span>\n                            </div>\n                        </div>\n                        <div class="flex justify-center">\n                            <button id="openSettingsBtn" class="btn btn-secondary hover-lift">\n                                <span class="icon">⚙️</span> Configure Git Settings\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                \n                \x3c!-- Statistics (Placeholder) --\x3e\n                <div class="card">\n                    <div class="card-header">\n                        <h2 class="card-title">\n                            <span class="icon">📊</span> Statistics\n                        </h2>\n                        <span class="badge badge-primary" id="statsTimeframe">Last 7 Days</span>\n                    </div>\n                    <div class="card-content">\n                        <div id="statsContainer" class="text-center">\n                            <div class="flex justify-around mb-4">\n                                <div>\n                                    <h3 class="text-xl font-bold" id="commitCount">-</h3>\n                                    <p class="text-sm text-gray-400">Commits</p>\n                                </div>\n                                <div>\n                                    <h3 class="text-xl font-bold" id="fileCount">-</h3>\n                                    <p class="text-sm text-gray-400">Files Changed</p>\n                                </div>\n                                <div>\n                                    <h3 class="text-xl font-bold" id="changeCount">-</h3>\n                                    <p class="text-sm text-gray-400">Lines Changed</p>\n                                </div>\n                            </div>\n                            <div id="chart" class="h-40">\n                                \x3c!-- Chart will be inserted here --\x3e\n                                <div class="flex items-center justify-center h-full">\n                                    <p class="text-gray-400 loading-dots">Loading statistics</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="mt-6 text-center text-sm text-gray-500 fade-in" style="animation-delay: 0.6s">\n                <p>Comitto v').concat(y,' • <span class="hover-underline tooltip">Made with ❤️<span class="tooltip-text">Thank you for using Comitto!</span></span></p>\n            </div>\n        </div>\n        \n        \x3c!-- Custom script with nonce --\x3e\n        <script nonce="').concat(k,'" src="').concat(v,'"><\/script>\n        \n        <script nonce="').concat(k,'">\n            // Initialize VS Code API\n            const vscode = acquireVsCodeApi();\n        <\/script>\n    </body>\n    </html>\n    ')}function V(){return H.apply(this,arguments)}function H(){return(H=g(d().mark((function e(){var t,n,r,o,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=m.workspace.getConfiguration("comitto"),(n=t.get("gitSettings")||{}).commitMessageLanguage,r=[{label:"Englisch",value:"en",description:"Commit-Nachrichten in englischer Sprache"},{label:"Deutsch",value:"de",description:"Commit-Nachrichten in deutscher Sprache"}],e.next=7,m.window.showQuickPick(r,{placeHolder:"Wählen Sie die Sprache für Commit-Nachrichten",title:"Commit-Nachrichtensprache auswählen"});case 7:if(!(o=e.sent)){e.next=17;break}return n.commitMessageLanguage=o.value,e.next=12,t.update("gitSettings",n,m.ConfigurationTarget.Global);case 12:return i=t.get("promptTemplate"),"de"===o.value?i.includes("auf Deutsch")||(i=(i=(i=(i=i.replace(/Generate a meaningful commit message in English/i,"Generiere eine aussagekräftige Commit-Nachricht auf Deutsch")).replace(/using the Conventional Commits format/i,"im Format der Conventional Commits")).replace(/Keep it under 80 characters/i,"Halte sie unter 80 Zeichen")).replace(/Here is the diff of changes/i,"Hier ist das Diff der Änderungen")):i.includes("in English")||(i=(i=(i=(i=i.replace(/Generiere eine aussagekräftige Commit-Nachricht auf Deutsch/i,"Generate a meaningful commit message in English")).replace(/im Format der Conventional Commits/i,"using the Conventional Commits format")).replace(/Halte sie unter 80 Zeichen/i,"Keep it under 80 characters")).replace(/Hier ist das Diff der Änderungen/i,"Here is the diff of changes")),e.next=16,t.update("promptTemplate",i,m.ConfigurationTarget.Global);case 16:m.window.showInformationMessage('Commit-Nachrichtensprache auf "'.concat(o.label,'" gesetzt.'));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),m.window.showErrorMessage("Fehler bei der Spracheinstellung: ".concat(e.t0.message));case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}function W(){return _.apply(this,arguments)}function _(){return(_=g(d().mark((function e(){var t,n,r,o,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.workspace.getConfiguration("comitto"),n=u({},t.get("gitSettings")),r=n.stageMode||"all",o=[{label:"Alle Änderungen",value:"all",detail:"Alle geänderten Dateien automatisch stagen (`git add .`)"},{label:"Spezifische Muster",value:"specific",detail:"Nur Dateien stagen, die bestimmten Mustern entsprechen"},{label:"Manuell auswählen",value:"prompt",detail:"Vor jedem Commit nach zu stagenden Dateien fragen"}],e.next=6,m.window.showQuickPick(o.map((function(e){return u(u({},e),{},{description:r===e.value?"(Aktuell)":""})})),{placeHolder:"Staging-Modus auswählen",title:"Wie sollen Änderungen gestaged werden?",ignoreFocusOut:!0});case 6:if(!(i=e.sent)){e.next=15;break}return n.stageMode=i.value,e.next=11,t.update("gitSettings",n,m.ConfigurationTarget.Global);case 11:if(m.window.showInformationMessage('Staging-Modus auf "'.concat(i.label,'" gesetzt.')),"specific"!==i.value||n.specificStagingPatterns&&0!==n.specificStagingPatterns.length){e.next=15;break}return e.next=15,q();case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return $.apply(this,arguments)}function $(){return($=g(d().mark((function e(){var t,n,r,o,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.workspace.getConfiguration("comitto"),n=u({},t.get("gitSettings")),r=n.specificStagingPatterns||[],e.next=5,m.window.showInputBox({placeHolder:"*.js,*.json,src/**/*",value:r.join(","),prompt:"Kommagetrennte Glob-Muster für spezifisches Staging",title:"Staging-Muster bearbeiten",ignoreFocusOut:!0});case 5:if(void 0===(o=e.sent)){e.next=12;break}return i=o.split(",").map((function(e){return e.trim()})).filter((function(e){return e})),n.specificStagingPatterns=i,e.next=11,t.update("gitSettings",n,m.ConfigurationTarget.Global);case 11:i.length>0?m.window.showInformationMessage("Spezifische Staging-Muster aktualisiert: ".concat(i.join(", "))):m.window.showInformationMessage("Spezifische Staging-Muster entfernt.");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return Z.apply(this,arguments)}function Z(){return(Z=g(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=m.workspace.workspaceFolders&&m.workspace.workspaceFolders[0]){e.next=5;break}return m.window.showErrorMessage("Kein Workspace geöffnet."),e.abrupt("return",!1);case 5:return n=t.uri.fsPath,e.next=8,v("git status --porcelain",n);case 8:if(e.sent.trim()){e.next=12;break}return m.window.showInformationMessage("Keine Änderungen zum Stagen vorhanden."),e.abrupt("return",!0);case 12:return r=m.window.setStatusBarMessage("$(sync~spin) Stage alle Änderungen...",2e3),e.next=15,v("git add .",n);case 15:return r.dispose(),m.window.showInformationMessage("Alle Änderungen wurden gestaged."),e.abrupt("return",!0);case 20:return e.prev=20,e.t0=e.catch(0),m.window.showErrorMessage("Fehler beim Stagen aller Änderungen: ".concat(e.t0.message)),e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}function Q(){return Y.apply(this,arguments)}function Y(){return(Y=g(d().mark((function e(){var t,n,r,o,i,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=m.workspace.workspaceFolders&&m.workspace.workspaceFolders[0]){e.next=5;break}return m.window.showErrorMessage("Kein Workspace geöffnet."),e.abrupt("return",!1);case 5:return n=t.uri.fsPath,e.next=8,v("git status --porcelain",n);case 8:if((r=e.sent).trim()){e.next=12;break}return m.window.showInformationMessage("Keine Änderungen zum Stagen gefunden."),e.abrupt("return",!0);case 12:if(0!==(o=r.split("\n").filter((function(e){return""!==e.trim()})).map((function(e){var t=e.substring(0,2),n=e.substring(3).trim();return{status:t,filePath:n,label:"".concat(h.getStatusDescription(t),": ").concat(n),picked:!t.includes("?")}}))).length){e.next=16;break}return m.window.showInformationMessage("Keine Änderungen zum Stagen gefunden."),e.abrupt("return",!0);case 16:return e.next=18,m.window.showQuickPick(o,{placeHolder:"Wählen Sie die zu stagenden Dateien aus",canPickMany:!0,ignoreFocusOut:!0,title:"Dateien für Staging auswählen"});case 18:if((i=e.sent)&&0!==i.length){e.next=22;break}return m.window.showInformationMessage("Keine Dateien zum Stagen ausgewählt."),e.abrupt("return",!1);case 22:return a=m.window.setStatusBarMessage("$(sync~spin) Stage ".concat(i.length," Datei(en)..."),5e3),s=i.map((function(e){return'"'.concat(e.filePath,'"')})).join(" "),e.next=26,v("git add -- ".concat(s),n);case 26:return a.dispose(),m.window.showInformationMessage("".concat(i.length," Datei(en) wurden gestaged.")),e.abrupt("return",!0);case 31:return e.prev=31,e.t0=e.catch(0),m.window.showErrorMessage("Fehler beim Stagen ausgewählter Dateien: ".concat(e.t0.message)),console.error("Staging Error Details:",e.t0),e.abrupt("return",!1);case 36:case"end":return e.stop()}}),e,null,[[0,31]])})))).apply(this,arguments)}function X(){return ee.apply(this,arguments)}function ee(){return(ee=g(d().mark((function e(){var t,n,r,o,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.workspace.getConfiguration("comitto"),n=u({},t.get("uiSettings")),r=n.theme||"auto",o=[{label:"Hell",value:"light",detail:"Helles Theme für Comitto UI-Elemente"},{label:"Dunkel",value:"dark",detail:"Dunkles Theme für Comitto UI-Elemente"},{label:"Automatisch",value:"auto",detail:"Theme automatisch an VS Code anpassen"}],e.next=6,m.window.showQuickPick(o.map((function(e){return u(u({},e),{},{description:r===e.value?"(Aktuell)":""})})),{placeHolder:"Theme für Comitto auswählen",title:"Comitto Theme",ignoreFocusOut:!0});case 6:if(!(i=e.sent)){e.next=12;break}return n.theme=i.value,e.next=11,t.update("uiSettings",n,m.ConfigurationTarget.Global);case 11:m.window.showInformationMessage('Comitto Theme auf "'.concat(i.label,'" gesetzt.'));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t){return ne.apply(this,arguments)}function ne(){return(ne=g(d().mark((function e(t,n){var r,o,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=m.workspace.getConfiguration("comitto"),o=r.get("notifications")||{},i=!o[t],a=u(u({},o),{},l({},t,i)),e.next=7,r.update("notifications",a,m.ConfigurationTarget.Global);case 7:("onError"!==t||i)&&m.window.showInformationMessage("".concat(n," wurden ").concat(i?"aktiviert":"deaktiviert",".")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),m.window.showErrorMessage("Fehler beim Umschalten von ".concat(n,": ").concat(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function re(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.message||"Unbekannter Fehler";console.error("Comitto Fehler [".concat(t,"]:"),e);var o=r;if(r.includes("fatal: not a git repository")?o="Dieses Verzeichnis ist kein Git-Repository. Bitte initialisieren Sie zuerst ein Git-Repository.":r.includes("fatal: unable to access")?o="Fehler beim Zugriff auf das Remote-Repository. Bitte prüfen Sie Ihre Netzwerkverbindung und Zugangsrechte.":r.includes("maxBuffer")||r.includes("zu groß")?o="Zu viele oder zu große Änderungen für die automatische Verarbeitung. Es wird versucht, mit einem kleineren Diff fortzufahren.":r.includes("fatal: could not read")?o="Fehler beim Lesen von Git-Objekten. Möglicherweise ist Ihr Repository beschädigt.":r.includes("Permission denied")?o="Zugriff verweigert. Bitte prüfen Sie Ihre Berechtigungen.":r.includes("Authentication failed")?o="Authentifizierung fehlgeschlagen. Bitte prüfen Sie Ihre Git-Credentials.":r.includes("ENOENT")?o="Datei oder Verzeichnis nicht gefunden.":r.includes("ECONNREFUSED")?o="Verbindung verweigert. Der Server ist möglicherweise nicht erreichbar.":r.includes("ETIMEDOUT")&&(o="Zeitüberschreitung bei der Verbindung. Bitte prüfen Sie Ihre Netzwerkverbindung."),n){var i=m.workspace.getConfiguration("comitto").get("notifications");i&&i.onError&&m.window.showErrorMessage("".concat(t,": ").concat(o))}return console.warn("Comitto [".concat(t,"] - Benutzerfreundlich: ").concat(o)),o}function oe(e,t){var n=m.workspace.getConfiguration("comitto"),r=n.get("gitSettings"),o=e.split("\n").filter((function(e){return e.trim().length>0})).map((function(e){var t=e.substring(0,2).trim(),n=e.substring(3).trim();return"".concat(b(t)," ").concat(n)})).join("\n"),i=n.get("promptTemplate");i=i.replace("{changes}",o);var a=r.commitMessageLanguage||"en",s="de"===a?"auf Deutsch":"in English";i.includes("auf Deutsch")&&"de"!==a?i=i.replace("auf Deutsch","in English"):i.includes("in English")&&"de"===a?i=i.replace("in English","auf Deutsch"):i.toLowerCase().includes(s.toLowerCase())||(i+="\nDie Commit-Nachricht soll ".concat(s," sein."));var c=r.commitMessageStyle||"conventional";return"conventional"!==c||i.toLowerCase().includes("conventional")?"gitmoji"!==c||i.toLowerCase().includes("gitmoji")||(i+="de"===a?"\nVerwende Gitmojis am Anfang der Commit-Nachricht (z.B. 🐛 für Bugfixes, ✨ für neue Features).":"\nUse Gitmojis at the beginning of the commit message (e.g. 🐛 for bugfixes, ✨ for new features)."):i+="de"===a?"\nVerwende das Conventional Commits Format (feat, fix, docs, style, etc.).":"\nUse the Conventional Commits format (feat, fix, docs, style, etc.).","en"!==a||i.toLowerCase().includes("conventional git conventions")||(i+='\n\nFollow these additional rules:\n1. Use imperative mood ("Add feature" not "Added feature")\n2. Don\'t capitalize the first word if using conventional commits format\n3. No period at the end\n4. Keep the message concise and under 72 characters if possible\n5. If needed, add more details after a blank line'),t&&t.length>0&&(i+="\n\n".concat(function(e){var t=3e3;e.length>1e5&&console.warn("Extrem großer Diff (".concat(e.length," Zeichen) wird stark gekürzt."));var n="";try{var r=e.split("diff --git"),o=Math.min(8,r.length);r.slice(0,o).forEach((function(e,t){if(0!==t||e.trim()){var r=e.match(/a\/(.+?) b\//),o=r?r[1]:"unknown-file",i=e.split("\n").filter((function(e){return e.startsWith("+")||e.startsWith("-")})).join("\n").substring(0,500);n+="\n".concat(t>0?"diff --git":""," a/").concat(o," b/").concat(o,"\n").concat(i),i.length>=500&&(n+="\n...")}})),n.length>t&&(n=n.substring(0,t),n+="\n..."),n+="\n[Diff wurde gekürzt, insgesamt ".concat(e.length," Zeichen in ").concat(r.length," Dateien]")}catch(r){console.error("Fehler beim intelligenten Kürzen des Diffs:",r),n=e.substring(0,t)+"\n...\n[Diff wurde einfach gekürzt, insgesamt ".concat(e.length," Zeichen]")}return"Hier ist ein Ausschnitt der konkreten Änderungen:\n"+n}(t))),i}function ie(){return(ie=g(d().mark((function e(t,n){var r,o,i,a,s,c,u,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=m.workspace.getConfiguration("comitto"),o=r.get("aiProvider"),i=oe(t,n),a="",e.t0=o,e.next="ollama"===e.t0?8:"openai"===e.t0?12:"anthropic"===e.t0?16:20;break;case 8:return e.next=10,generateWithOllama(i);case 10:case 14:case 18:return a=e.sent,e.abrupt("break",21);case 12:return e.next=14,generateWithOpenAI(i);case 16:return e.next=18,generateWithAnthropic(i);case 20:throw new Error("Unbekannter KI-Provider: ".concat(o));case 21:return e.abrupt("return",ae(a));case 24:if(e.prev=24,e.t1=e.catch(0),re(e.t1,"Commit-Nachricht generieren"),s=m.workspace.getConfiguration("comitto"),c=s.get("gitSettings"),u=c.commitMessageLanguage||"en",l=c.commitMessageStyle||"conventional","de"!==u){e.next=35;break}return e.abrupt("return","conventional"===l?"chore: Änderungen gespeichert":"💾 Änderungen gespeichert");case 35:return e.abrupt("return","conventional"===l?"chore: save changes":"💾 Save changes");case 36:case"end":return e.stop()}}),e,null,[[0,24]])})))).apply(this,arguments)}function ae(e){if(!e)return"chore: auto commit";var t=e.trim().replace(/^["']|["']$/g,"").replace(/\n/g," "),n=(t=t.replace(/\s+/g," ").replace(/^(commit[- ]message:?\s*)/i,"").replace(/^```|```$/g,"")).match(/^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\([\w-]+\))?:\s*(.+)/i);if(n){var r=n[1].toLowerCase(),o=n[2]||"",i=n[3];t="".concat(r).concat(o,": ").concat(i)}return(t=t.replace(/\.$/,"")).length>72&&(t=t.substring(0,69)+"..."),t}function se(){return ce.apply(this,arguments)}function ce(){return(ce=g(d().mark((function e(){var t,n,r,i,a,s,c,u,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.workspace.getConfiguration("comitto"),n=t.get("openai.model"),global.statusBarItem&&(global.statusBarItem.text="$(sync~spin) Comitto: Lade verfügbare Modelle..."),e.prev=3,r=t.get("openai.apiKey")){e.next=7;break}throw new Error("OpenAI API-Schlüssel nicht konfiguriert");case 7:return e.next=9,w.get("https://api.openai.com/v1/models",{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});case 9:if(i=e.sent,global.statusBarItem&&(global.statusBarItem.text="$(sync~spin) Comitto: Aktiv"),i.data&&i.data.data){e.next=13;break}throw new Error("Unerwartetes Antwortformat von OpenAI");case 13:return a=i.data.data.filter((function(e){return e.id.includes("gpt-")&&!e.id.includes("-vision-")&&!e.id.includes("instruct")})).map((function(e){return e.id})).sort((function(e,t){return e.includes("gpt-4")&&!t.includes("gpt-4")?-1:!e.includes("gpt-4")&&t.includes("gpt-4")?1:t.localeCompare(e)})),["gpt-4o","gpt-4o-mini","gpt-4","gpt-4-turbo","gpt-3.5-turbo","gpt-3.5-turbo-0125"].forEach((function(e){a.includes(e)||a.unshift(e)})),s=o(new Set(a)),e.next=19,m.window.showQuickPick(s.map((function(e){return{label:e,description:e===n?"(Aktuell)":""}})),{placeHolder:"OpenAI-Modell auswählen",ignoreFocusOut:!0});case 19:if(!(c=e.sent)){e.next=24;break}return e.next=23,t.update("openai.model",c.label,m.ConfigurationTarget.Global);case 23:m.window.showInformationMessage("OpenAI-Modell auf ".concat(c.label," gesetzt."));case 24:e.next=39;break;case 26:return e.prev=26,e.t0=e.catch(3),global.statusBarItem&&(global.statusBarItem.text="$(sync~spin) Comitto: Aktiv"),console.error("Fehler beim Laden der OpenAI-Modelle:",e.t0),m.window.showWarningMessage("Fehler beim Laden der Modelle: ".concat(e.t0.message,". Verwende Standard-Liste.")),u=["gpt-4o","gpt-4o-mini","gpt-4","gpt-4-turbo","gpt-4-0125-preview","gpt-4-1106-preview","gpt-4-vision-preview","gpt-3.5-turbo","gpt-3.5-turbo-0125","gpt-3.5-turbo-1106"],e.next=34,m.window.showQuickPick(u.map((function(e){return{label:e,description:e===n?"(Aktuell)":""}})),{placeHolder:"OpenAI-Modell auswählen",ignoreFocusOut:!0});case 34:if(!(l=e.sent)){e.next=39;break}return e.next=38,t.update("openai.model",l.label,m.ConfigurationTarget.Global);case 38:m.window.showInformationMessage("OpenAI-Modell auf ".concat(l.label," gesetzt."));case 39:case"end":return e.stop()}}),e,null,[[3,26]])})))).apply(this,arguments)}function ue(e){return le.apply(this,arguments)}function le(){return(le=g(d().mark((function e(t){var n,r,o,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=m.workspace.getConfiguration("comitto"),r=n.get("aiProvider"),o=[{label:"Ollama (lokal)",id:"ollama",description:"ollama"===r?"(Aktuell)":""},{label:"OpenAI",id:"openai",description:"openai"===r?"(Aktuell)":""},{label:"Anthropic Claude",id:"anthropic",description:"anthropic"===r?"(Aktuell)":""}],e.next=6,m.window.showQuickPick(o,{placeHolder:"KI-Provider auswählen",title:"Comitto - KI-Provider konfigurieren"});case 6:if(!(i=e.sent)){e.next=29;break}if(i.id===r){e.next=12;break}return e.next=11,n.update("aiProvider",i.id,m.ConfigurationTarget.Global);case 11:m.window.showInformationMessage('KI-Provider auf "'.concat(i.label,'" gesetzt.'));case 12:e.t0=i.id,e.next="ollama"===e.t0?15:"openai"===e.t0?18:"anthropic"===e.t0?23:28;break;case 15:return e.next=17,de();case 17:return e.abrupt("break",28);case 18:return e.next=20,se();case 20:return e.next=22,F();case 22:return e.abrupt("break",28);case 23:return e.next=25,B();case 25:return e.next=27,j();case 27:return e.abrupt("break",28);case 28:t&&(t.statusProvider.refresh(),t.settingsProvider.refresh(),t.quickActionsProvider.refresh());case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(0),m.window.showErrorMessage("Fehler bei der KI-Provider-Konfiguration: ".concat(e.t1.message));case 34:case"end":return e.stop()}}),e,null,[[0,31]])})))).apply(this,arguments)}function de(){return pe.apply(this,arguments)}function pe(){return(pe=g(d().mark((function e(){var t,n,r,i,a,s,c,u,l,p,g,h,f,v,b,x,k,y;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=m.workspace.getConfiguration("comitto"),n=t.get("ollama")||{},r=n.model,i=t.get("ollama-model"),r||!i){e.next=13;break}return r=i,n.model=i,e.next=10,t.update("ollama",n,m.ConfigurationTarget.Global);case 10:return e.next=12,t.update("ollama-model",void 0,m.ConfigurationTarget.Global);case 12:m.window.showInformationMessage("Korrektur der Ollama-Modell-Konfiguration durchgeführt.");case 13:return a=r||"granite3.3:2b",s=n.endpoint||"http://localhost:11434",c=[{label:"Ollama-Modell ändern",id:"model",description:"Aktuell: ".concat(a)},{label:"Ollama-Endpoint ändern",id:"endpoint",description:"Aktuell: ".concat(s)}],e.next=18,m.window.showQuickPick(c,{placeHolder:"Ollama-Einstellung konfigurieren",title:"Comitto - Ollama-Einstellungen"});case 18:if(u=e.sent){e.next=21;break}return e.abrupt("return",!1);case 21:if("model"!==u.id){e.next=64;break}return global.statusBarItem&&(global.statusBarItem.text="$(sync~spin) Comitto: Lade verfügbare Modelle..."),l=[],e.prev=24,e.next=27,w.get("".concat(s,"/api/tags"));case 27:(p=e.sent).data&&p.data.models&&(l=p.data.models.map((function(e){return e.name})),m.window.showInformationMessage("".concat(l.length," Ollama-Modelle gefunden."))),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(24),console.error("Fehler beim Abrufen der Ollama-Modelle:",e.t0),m.window.showWarningMessage("Keine Ollama-Modelle gefunden: ".concat(e.t0.message,". Verwende Standard-Liste."));case 35:return e.prev=35,global.statusBarItem&&(global.statusBarItem.text="$(sync~spin) Comitto: Aktiv"),e.finish(35);case 38:return g=["granite3.3:2b","llama3","llama3:8b","llama3:70b","llama2","llama2:13b","llama2:70b","mistral","mistral:7b-instruct-v0.2","orca-mini","vicuna","codellama","phi"],(h=o(new Set([].concat(o(l),g)))).sort((function(e,t){return"granite3.3:2b"===e?-1:"granite3.3:2b"===t?1:e.localeCompare(t)})),e.next=43,m.window.showQuickPick([].concat(o(h.map((function(e){return{label:e,description:e===a?"(Aktuell)":""}}))),[{label:"Benutzerdefiniert...",description:"Eigenen Modellnamen eingeben"}]),{placeHolder:"Ollama-Modell auswählen",title:"Comitto - Ollama-Modell"});case 43:if(!(f=e.sent)){e.next=62;break}if("Benutzerdefiniert..."!==f.label){e.next=57;break}return e.next=48,m.window.showInputBox({prompt:"Geben Sie den Namen des Ollama-Modells ein",value:a,placeHolder:"z.B. granite3.3:2b"});case 48:if(!(v=e.sent)){e.next=55;break}return(b=t.get("ollama")||{}).model=v,e.next=54,t.update("ollama",b,m.ConfigurationTarget.Global);case 54:m.window.showInformationMessage('Ollama-Modell auf "'.concat(v,'" gesetzt.'));case 55:e.next=62;break;case 57:return(x=t.get("ollama")||{}).model=f.label,e.next=61,t.update("ollama",x,m.ConfigurationTarget.Global);case 61:m.window.showInformationMessage('Ollama-Modell auf "'.concat(f.label,'" gesetzt.'));case 62:e.next=77;break;case 64:if("endpoint"!==u.id){e.next=77;break}return e.next=67,m.window.showInputBox({prompt:"Geben Sie den Ollama-Endpoint ein",value:s,placeHolder:"z.B. http://localhost:11434"});case 67:if(!(k=e.sent)){e.next=77;break}if(k.startsWith("http://")||k.startsWith("https://")){e.next=72;break}return m.window.showWarningMessage("Der Endpoint sollte mit http:// oder https:// beginnen."),e.abrupt("return",!1);case 72:return(y=t.get("ollama")||{}).endpoint=k,e.next=76,t.update("ollama",y,m.ConfigurationTarget.Global);case 76:m.window.showInformationMessage('Ollama-Endpoint auf "'.concat(k,'" gesetzt.'));case 77:return e.abrupt("return",!0);case 80:return e.prev=80,e.t1=e.catch(0),m.window.showErrorMessage("Fehler bei der Ollama-Konfiguration: ".concat(e.t1.message)),e.abrupt("return",!1);case 84:case"end":return e.stop()}}),e,null,[[0,80],[24,31,35,38]])})))).apply(this,arguments)}function ge(){return ge=g(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(r=t.globalState.get("comittoSimpleUIPanel"))?r.reveal(m.ViewColumn.One):(r=m.window.createWebviewPanel("comittoSimpleUI","Comitto",m.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0}),t.globalState.update("comittoSimpleUIPanel",r),r.onDidDispose((function(){t.globalState.update("comittoSimpleUIPanel",void 0)}),null,t.subscriptions),r.webview.onDidReceiveMessage(function(){var e=g(d().mark((function e(t){var n,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.command,e.next="commit"===e.t0?3:"toggle"===e.t0?5:"stage"===e.t0?11:"settings"===e.t0?13:"dashboard"===e.t0?15:17;break;case 3:return m.commands.executeCommand("comitto.performManualCommit"),e.abrupt("break",17);case 5:return n=m.workspace.getConfiguration("comitto"),o=!n.get("autoCommitEnabled"),e.next=9,n.update("autoCommitEnabled",o,m.ConfigurationTarget.Global);case 9:return r.webview.html=me(),e.abrupt("break",17);case 11:return m.commands.executeCommand("comitto.stageAll"),e.abrupt("break",17);case 13:return m.commands.executeCommand("comitto.openSettings"),e.abrupt("break",17);case 15:return m.commands.executeCommand("comitto.showDashboard"),e.abrupt("break",17);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),void 0,t.subscriptions)),r.webview.html=me()}catch(e){m.window.showErrorMessage("Fehler beim Anzeigen der einfachen Benutzeroberfläche: ".concat(e.message))}case 1:case"end":return e.stop()}}),e)}))),ge.apply(this,arguments)}function me(e){var t=m.workspace.getConfiguration("comitto"),n=t.get("autoCommitEnabled"),r=t.get("aiProvider"),o=h.getProviderDisplayName(r);return'\n    <!DOCTYPE html>\n    <html lang="de">\n    <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>Comitto</title>\n        <style>\n            body {\n                font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Oxygen, Ubuntu, Cantarell, \'Open Sans\', \'Helvetica Neue\', sans-serif;\n                padding: 15px;\n                color: var(--vscode-foreground);\n                background-color: var(--vscode-editor-background);\n            }\n            .container {\n                max-width: 400px;\n                margin: 0 auto;\n                padding: 15px;\n                border-radius: 8px;\n                background-color: var(--vscode-editor-background);\n                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n            }\n            h1 {\n                text-align: center;\n                margin-bottom: 20px;\n                color: var(--vscode-editor-foreground);\n            }\n            .status {\n                display: flex;\n                align-items: center;\n                margin-bottom: 15px;\n                padding: 10px;\n                border-radius: 5px;\n                background: '.concat(n?"rgba(0, 150, 0, 0.1)":"rgba(150, 0, 0, 0.1)",";\n            }\n            .status-indicator {\n                width: 12px;\n                height: 12px;\n                border-radius: 50%;\n                margin-right: 10px;\n                background-color: ").concat(n?"#00c853":"#ff3d00",";\n                box-shadow: 0 0 8px ").concat(n?"rgba(0, 200, 83, 0.8)":"rgba(255, 61, 0, 0.8)",";\n            }\n            .button-group {\n                display: grid;\n                grid-template-columns: 1fr 1fr;\n                gap: 10px;\n                margin-bottom: 15px;\n            }\n            button {\n                padding: 10px;\n                border: none;\n                border-radius: 5px;\n                background-color: var(--vscode-button-background);\n                color: var(--vscode-button-foreground);\n                cursor: pointer;\n                font-weight: 600;\n                transition: background-color 0.2s;\n            }\n            button:hover {\n                background-color: var(--vscode-button-hoverBackground);\n            }\n            .main-button {\n                grid-column: span 2;\n                padding: 12px;\n                background-color: #0078D4;\n                color: white;\n                font-size: 1.1em;\n            }\n            .toggle-button {\n                background-color: ").concat(n?"#e53935":"#43a047",';\n            }\n            .footer {\n                margin-top: 20px;\n                text-align: center;\n                font-size: 0.9em;\n                color: var(--vscode-descriptionForeground);\n            }\n            .info {\n                margin-top: 15px;\n                padding: 10px;\n                border-radius: 5px;\n                background-color: var(--vscode-editor-inactiveSelectionBackground);\n                font-size: 0.9em;\n            }\n        </style>\n    </head>\n    <body>\n        <div class="container">\n            <h1>Comitto</h1>\n            \n            <div class="status">\n                <div class="status-indicator"></div>\n                <div>Status: ').concat(n?"Aktiviert":"Deaktiviert",'</div>\n            </div>\n            \n            <button class="main-button" id="commitBtn">Manuelles Commit 💾</button>\n            \n            <div class="button-group">\n                <button class="toggle-button" id="toggleBtn">\n                    ').concat(n?"Deaktivieren 🚫":"Aktivieren ✅",'\n                </button>\n                <button id="stageBtn">Alle Änderungen stagen 📋</button>\n            </div>\n            \n            <div class="button-group">\n                <button id="settingsBtn">Einstellungen ⚙️</button>\n                <button id="dashboardBtn">Dashboard 📊</button>\n            </div>\n            \n            <div class="info">\n                <p><strong>KI-Provider:</strong> ').concat(o,"</p>\n            </div>\n            \n            <div class=\"footer\">\n                <p>Comitto - Automatisierte KI-Commits</p>\n            </div>\n        </div>\n        \n        <script>\n            (function() {\n                const vscode = acquireVsCodeApi();\n                \n                document.getElementById('commitBtn').addEventListener('click', () => {\n                    vscode.postMessage({ command: 'commit' });\n                });\n                \n                document.getElementById('toggleBtn').addEventListener('click', () => {\n                    vscode.postMessage({ command: 'toggle' });\n                });\n                \n                document.getElementById('stageBtn').addEventListener('click', () => {\n                    vscode.postMessage({ command: 'stage' });\n                });\n                \n                document.getElementById('settingsBtn').addEventListener('click', () => {\n                    vscode.postMessage({ command: 'settings' });\n                });\n                \n                document.getElementById('dashboardBtn').addEventListener('click', () => {\n                    vscode.postMessage({ command: 'dashboard' });\n                });\n            })();\n        <\/script>\n    </body>\n    </html>\n    ")}function he(e,t){return fe.apply(this,arguments)}function fe(){return(fe=g(d().mark((function e(t,n){var o,i,a,s,c,l,p,g,h,f,v,b,w,k;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=m.workspace.getConfiguration("comitto"),i=o.get("triggerRules"),a=[{label:"Bei Speichern auslösen",id:"onSave",picked:i.onSave,detail:"Commits werden beim Speichern ausgelöst"},{label:"Periodisch auslösen",id:"onInterval",picked:i.onInterval,detail:"Commits werden in regelmäßigen Abständen ausgelöst"},{label:"Bei Branch-Wechsel auslösen",id:"onBranchSwitch",picked:i.onBranchSwitch,detail:"Commits werden beim Wechsel des Branches ausgelöst"},{label:"Schwellenwerte konfigurieren...",id:"thresholds",detail:"Datei-Anzahl, Änderungen und Zeit konfigurieren"},{label:"Dateimuster konfigurieren...",id:"patterns",detail:"Bestimmte Dateitypen überwachen"}],e.next=6,m.window.showQuickPick(a,{placeHolder:"Trigger-Regeln konfigurieren",title:"Comitto - Trigger-Konfiguration",canPickMany:!0});case 6:if(s=e.sent){e.next=9;break}return e.abrupt("return");case 9:c=u({},i),l=r(s);try{for(l.s();!(p=l.n()).done;)g=p.value,["onSave","onInterval","onBranchSwitch"].includes(g.id)&&(c[g.id]=!0)}catch(e){l.e(e)}finally{l.f()}h=d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=v[f],s.some((function(e){return e.id===t}))||(c[t]=!1);case 2:case"end":return e.stop()}}),e)})),f=0,v=["onSave","onInterval","onBranchSwitch"];case 14:if(!(f<v.length)){e.next=19;break}return e.delegateYield(h(),"t0",16);case 16:f++,e.next=14;break;case 19:return e.next=21,o.update("triggerRules",c,m.ConfigurationTarget.Global);case 21:b=r(s),e.prev=22,b.s();case 24:if((w=b.n()).done){e.next=41;break}if("thresholds"!==(k=w.value).id){e.next=31;break}return e.next=29,configureThresholds(c);case 29:e.next=39;break;case 31:if("patterns"!==k.id){e.next=36;break}return e.next=34,configureFilePatterns(c);case 34:e.next=39;break;case 36:if("onInterval"!==k.id||!c.onInterval){e.next=39;break}return e.next=39,x("intervalMinutes","Intervall (Minuten)","z.B. 5","number");case 39:e.next=24;break;case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(22),b.e(e.t1);case 46:return e.prev=46,b.f(),e.finish(46);case 49:n&&(n.statusProvider.refresh(),n.settingsProvider.refresh()),e.next=55;break;case 52:e.prev=52,e.t2=e.catch(0),m.window.showErrorMessage("Fehler bei der Trigger-Konfiguration: ".concat(e.t2.message));case 55:case"end":return e.stop()}}),e,null,[[0,52],[22,43,46,49]])})))).apply(this,arguments)}global.statusBarItem=null,e.exports={registerCommands:function(e,t,n,r,o,i,a){global.statusBarItem=n,global.showNotification=a,e.subscriptions.push(m.commands.registerCommand("comitto.openSettings",(function(){m.commands.executeCommand("workbench.action.openSettings","comitto")}))),e.subscriptions.push(m.commands.registerCommand("comitto.refreshSettings",(function(){t&&(t.statusProvider.refresh(),t.settingsProvider.refresh(),t.quickActionsProvider.refresh()),a("Comitto-Einstellungen wurden aktualisiert.","info")}))),e.subscriptions.push(m.commands.registerCommand("comitto.enableAutoCommit",g(d().mark((function o(){var i,s;return d().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,m.workspace.getConfiguration("comitto").update("autoCommitEnabled",!0,m.ConfigurationTarget.Global);case 2:r(e),n.text="$(sync~spin) Comitto: Aktiv",t&&(t.statusProvider.refresh(),t.quickActionsProvider.refresh()),i=m.workspace.getConfiguration("comitto"),(s=i.get("uiSettings"))&&s.showNotifications&&a("Automatische Commits sind aktiviert.","info");case 8:case"end":return o.stop()}}),o)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.disableAutoCommit",g(d().mark((function e(){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.workspace.getConfiguration("comitto").update("autoCommitEnabled",!1,m.ConfigurationTarget.Global);case 2:o(),n.text="$(git-commit) Comitto: Inaktiv",t&&(t.statusProvider.refresh(),t.quickActionsProvider.refresh()),r=m.workspace.getConfiguration("comitto"),(i=r.get("uiSettings"))&&i.showNotifications&&a("Automatische Commits sind deaktiviert.","info");case 8:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.toggleAutoCommit",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.workspace.getConfiguration("comitto").get("autoCommitEnabled")){e.next=7;break}return e.next=5,m.commands.executeCommand("comitto.enableAutoCommit");case 5:e.next=9;break;case 7:return e.next=9,m.commands.executeCommand("comitto.disableAutoCommit");case 9:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.performManualCommit",g(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=m.workspace.getConfiguration("comitto"),n=t.get("uiSettings"),r=!0,!n||!n.confirmBeforeCommit){e.next=9;break}return e.next=7,m.window.showInformationMessage("Möchten Sie einen manuellen KI-Commit durchführen?",{modal:!0},"Ja");case 7:e.t0=e.sent,r="Ja"===e.t0;case 9:if(!r){e.next=12;break}return e.next=12,i(!0);case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),a("Fehler beim manuellen Commit: ".concat(e.t1.message),"error");case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))))),e.subscriptions.push(m.commands.registerCommand("comitto.selectAiProvider",g(d().mark((function e(){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{label:"Ollama (lokal)",id:"ollama"},{label:"OpenAI",id:"openai"},{label:"Anthropic Claude",id:"anthropic"}],e.next=3,m.window.showQuickPick(n,{placeHolder:"KI-Provider auswählen",title:"Comitto - KI-Provider auswählen"});case 3:if(!(r=e.sent)){e.next=9;break}return e.next=7,m.workspace.getConfiguration("comitto").update("aiProvider",r.id,m.ConfigurationTarget.Global);case 7:t&&(t.statusProvider.refresh(),t.settingsProvider.refresh(),t.quickActionsProvider.refresh()),a('KI-Provider auf "'.concat(r.label,'" gesetzt.'),"info");case 9:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.configureOllamaSettings",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:e.sent&&t&&(t.statusProvider.refresh(),t.settingsProvider.refresh());case 4:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.selectOpenAIModel",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se();case 2:t&&t.settingsProvider.refresh();case 3:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.editOpenAIKey",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:t&&t.settingsProvider.refresh();case 3:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.selectAnthropicModel",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:t&&t.settingsProvider.refresh();case 3:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.editAnthropicKey",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:t&&t.settingsProvider.refresh();case 3:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.editFileCountThreshold",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("fileCountThreshold","Datei-Anzahl Schwellenwert","z.B. 3","number");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.editMinChangeCount",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("minChangeCount","Änderungs-Anzahl Schwellenwert","z.B. 10","number");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.editTimeThreshold",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("timeThresholdMinutes","Zeit-Schwellwert (Minuten)","z.B. 30","number");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.editFilePatterns",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("filePatterns","Dateimuster (kommagetrennt)","z.B. **/*.js, **/*.ts","patterns");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.editSpecificFiles",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("specificFiles","Spezifische Dateien (kommagetrennt)","z.B. package.json, README.md","files");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.editIntervalMinutes",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("intervalMinutes","Intervall für Intervall-Trigger (Minuten)","z.B. 15","number");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.toggleOnSave",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("onSave","Speichern-Trigger");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.toggleOnInterval",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("onInterval","Intervall-Trigger");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.toggleOnBranchSwitch",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("onBranchSwitch","Branch-Wechsel-Trigger");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.toggleAutoPush",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("autoPush","Auto-Push");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.editBranch",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("branch","Branch für Commits","Leer lassen für aktuellen Branch");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.stageAll",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J();case 3:t&&(t.statusProvider.refresh(),t.quickActionsProvider.refresh()),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a("Fehler beim Stagen aller Änderungen: ".concat(e.t0.message),"error");case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))))),e.subscriptions.push(m.commands.registerCommand("comitto.stageSelected",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q();case 3:t&&(t.statusProvider.refresh(),t.quickActionsProvider.refresh()),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a("Fehler beim Stagen ausgewählter Änderungen: ".concat(e.t0.message),"error");case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))))),e.subscriptions.push(m.commands.registerCommand("comitto.selectCommitLanguage",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.selectCommitStyle",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("commitMessageStyle","Commit-Nachrichtenstil",[{label:"Conventional Commits",value:"conventional"},{label:"Gitmoji",value:"gitmoji"}]);case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.toggleUseGitignore",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("useGitignore","Gitignore-Verwendung");case 2:return e.next=4,m.commands.getCommands(!0).then((function(e){return e.includes("comitto.internal.reloadGitignore")}));case 4:e.sent?m.commands.executeCommand("comitto.internal.reloadGitignore"):console.warn("Befehl comitto.internal.reloadGitignore nicht gefunden.");case 6:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.selectStageMode",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.editStagingPatterns",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.toggleSimpleMode",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("simpleMode","Einfacher Modus");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.toggleConfirmBeforeCommit",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("confirmBeforeCommit","Bestätigung vor Commit");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.toggleShowNotifications",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("showNotifications","Benachrichtigungen anzeigen");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.selectTheme",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.toggleNotificationOnCommit",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te("onCommit","Commit-Benachrichtigungen");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.toggleNotificationOnPush",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te("onPush","Push-Benachrichtigungen");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.toggleNotificationOnError",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te("onError","Fehler-Benachrichtigungen");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.toggleNotificationOnTriggerFired",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te("onTriggerFired","Trigger-Benachrichtigungen");case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.editPromptTemplate",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:t&&t.settingsProvider.refresh();case 3:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.showDashboard",g(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U(e);case 2:case"end":return t.stop()}}),t)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.configureAIProvider",g(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(t);case 2:case"end":return e.stop()}}),e)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.configureTriggers",g(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,he(e,t);case 2:case"end":return n.stop()}}),n)}))))),e.subscriptions.push(m.commands.registerCommand("comitto.showSimpleUI",(function(){!function(e,t){ge.apply(this,arguments)}(e,t)})))},generateCommitMessage:function(e,t){return ie.apply(this,arguments)},handleError:re}},2018:e=>{"use strict";e.exports=require("tty")},2203:e=>{"use strict";e.exports=require("stream")},2613:e=>{"use strict";e.exports=require("assert")},3106:e=>{"use strict";e.exports=require("zlib")},4434:e=>{"use strict";e.exports=require("events")},5317:e=>{"use strict";e.exports=require("child_process")},5692:e=>{"use strict";e.exports=require("https")},6928:e=>{"use strict";e.exports=require("path")},6982:e=>{"use strict";e.exports=require("crypto")},7016:e=>{"use strict";e.exports=require("url")},8611:e=>{"use strict";e.exports=require("http")},9023:e=>{"use strict";e.exports=require("util")},9896:e=>{"use strict";e.exports=require("fs")}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e](n,n.exports,i),n.exports}i.m=r,i.x=()=>{var e=i.O(void 0,[121,730],(()=>i(286)));return i.O(e)},e=[],i.O=(t,n,r,o)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,r,o]=e[l],s=!0,c=0;c<n.length;c++)(!1&o||a>=o)&&Object.keys(i.O).every((e=>i.O[e](n[c])))?n.splice(c--,1):(s=!1,o<a&&(a=o));if(s){e.splice(l--,1);var u=r();void 0!==u&&(t=u)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,r,o]},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>(121===e?"vendor":e)+".js",i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={217:1,606:1},i.O.require=e=>n[e],i.f.require=(e,t)=>{n[e]||(e=>{var t=e.modules,r=e.ids,o=e.runtime;for(var a in t)i.o(t,a)&&(i.m[a]=t[a]);o&&o(i);for(var s=0;s<r.length;s++)n[r[s]]=1;i.O()})(require("./"+i.u(e)))},t=i.x,i.x=()=>(i.e(121),i.e(730),t());var a=i.x();module.exports=a})();
//# sourceMappingURL=extension.js.map